<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JavaScript Moderno (ES6+) - Academia de Programación</title>
    <meta name="description" content="Aprende las características modernas de JavaScript ES6+ incluyendo let/const, arrow functions, template literals, destructuring, spread operator y más.">
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
</head>
<body>
    <!-- Header con navegación -->
    <header class="header">
        <nav class="navbar">
            <div class="nav-brand">
                <i class="fab fa-js-square"></i>
                <span>JS Academy</span>
            </div>
            <ul class="nav-menu">
                <li><a href="./index.html" class="nav-link">Inicio</a></li>
            </ul>
            <div class="hamburger">
                <span class="bar"></span>
                <span class="bar"></span>
                <span class="bar"></span>
            </div>
        </nav>
    </header>

    <!-- Breadcrumbs -->
    <nav class="breadcrumb" id="breadcrumb">
        <ol class="breadcrumb-list">
            <li class="breadcrumb-item">
                <a href="./index.html"><i class="fas fa-home"></i> Inicio</a>
            </li>
            <li class="breadcrumb-item">
                <a href="index.html#modulos">Módulos</a>
            </li>
            <li class="breadcrumb-item active" id="current-page">JavaScript Moderno (ES6+)</li>
        </ol>
    </nav>

    <!-- Barra de Progreso -->
    <section class="progress-bar-section">
        <div class="container">
            <div class="progress-container">
                <div class="progress-info">
                    <i class="fas fa-chart-line"></i>
                    <span class="progress-label">Progreso del Módulo</span>
                    <span class="progress-percentage">0%</span>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" id="moduleProgress"></div>
                </div>
            </div>
        </div>
    </section>

    <!-- Hero del Módulo -->
    <section class="module-hero">
        <div class="container">
            <div class="module-header">
                <div class="module-badge">
                    <i class="fas fa-rocket"></i>
                    <span>Módulo 2</span>
                </div>
                <h1>JavaScript Moderno (ES6+)</h1>
                <p class="module-description">
                    Domina las características modernas de JavaScript que revolucionaron el desarrollo web. 
                    Aprende ES6+ con ejemplos prácticos y ejercicios interactivos.
                </p>
                <div class="module-meta">
                    <div class="meta-item">
                        <i class="fas fa-clock"></i>
                        <span>4-6 horas</span>
                    </div>
                    <div class="meta-item">
                        <i class="fas fa-code"></i>
                        <span>15+ ejemplos</span>
                    </div>
                    <div class="meta-item">
                        <i class="fas fa-star"></i>
                        <span>Intermedio</span>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Navegación del Módulo -->
    <section class="module-nav">
        <div class="container">
            <div class="module-nav-content">
                <h3>📚 Lecciones del Módulo</h3>
                <div class="module-nav-list">
                    <a href="#let-const" class="nav-item" data-section="let-const">
                        <div class="nav-item-icon">
                            <i class="fas fa-tag"></i>
                        </div>
                        <div class="nav-item-content">
                            <span class="nav-item-title">Let, Const y Var</span>
                            <span class="nav-item-desc">Declaraciones modernas de variables</span>
                        </div>
                        <div class="nav-item-status">
                            <i class="far fa-circle"></i>
                        </div>
                    </a>
                    <a href="#arrow-functions" class="nav-item" data-section="arrow-functions">
                        <div class="nav-item-icon">
                            <i class="fas fa-arrow-right"></i>
                        </div>
                        <div class="nav-item-content">
                            <span class="nav-item-title">Arrow Functions</span>
                            <span class="nav-item-desc">Sintaxis moderna de funciones</span>
                        </div>
                        <div class="nav-item-status">
                            <i class="far fa-circle"></i>
                        </div>
                    </a>
                    <a href="#template-literals" class="nav-item" data-section="template-literals">
                        <div class="nav-item-icon">
                            <i class="fas fa-quote-left"></i>
                        </div>
                        <div class="nav-item-content">
                            <span class="nav-item-title">Template Literals</span>
                            <span class="nav-item-desc">Strings modernos con interpolación</span>
                        </div>
                        <div class="nav-item-status">
                            <i class="far fa-circle"></i>
                        </div>
                    </a>
                    <a href="#destructuring" class="nav-item" data-section="destructuring">
                        <div class="nav-item-icon">
                            <i class="fas fa-unpack"></i>
                        </div>
                        <div class="nav-item-content">
                            <span class="nav-item-title">Destructuring</span>
                            <span class="nav-item-desc">Extracción elegante de datos</span>
                        </div>
                        <div class="nav-item-status">
                            <i class="far fa-circle"></i>
                        </div>
                    </a>
                    <a href="#spread-rest" class="nav-item" data-section="spread-rest">
                        <div class="nav-item-icon">
                            <i class="fas fa-expand-arrows-alt"></i>
                        </div>
                        <div class="nav-item-content">
                            <span class="nav-item-title">Spread & Rest</span>
                            <span class="nav-item-desc">Operadores de expansión</span>
                        </div>
                        <div class="nav-item-status">
                            <i class="far fa-circle"></i>
                        </div>
                    </a>
                    <a href="#modules" class="nav-item" data-section="modules">
                        <div class="nav-item-icon">
                            <i class="fas fa-puzzle-piece"></i>
                        </div>
                        <div class="nav-item-content">
                            <span class="nav-item-title">Módulos ES6</span>
                            <span class="nav-item-desc">Import/Export moderno</span>
                        </div>
                        <div class="nav-item-status">
                            <i class="far fa-circle"></i>
                        </div>
                    </a>
                </div>
            </div>
        </div>
    </section>

    <!-- Lección 1: Let, Const y Var -->
    <section id="let-const" class="lesson-section" data-lesson="let-const">
        <div class="container">
            <div class="lesson-header">
                <div class="lesson-badge">
                    <i class="fas fa-tag"></i>
                    <span>Lección 1</span>
                </div>
                <h2>Let, Const y Var</h2>
                <p class="lesson-intro">Las declaraciones modernas de variables que cambiaron JavaScript para siempre. Entiende las diferencias y cuándo usar cada una.</p>
                
                <div class="key-points">
                    <h4>🎯 Puntos Clave</h4>
                    <div class="key-points-grid">
                        <div class="key-point">
                            <i class="fas fa-lightbulb"></i>
                            <span>Scope de bloque vs función</span>
                        </div>
                        <div class="key-point">
                            <i class="fas fa-lightbulb"></i>
                            <span>Hoisting y temporal dead zone</span>
                        </div>
                        <div class="key-point">
                            <i class="fas fa-lightbulb"></i>
                            <span>Inmutabilidad con const</span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="lesson-content">
                <div class="theory-section">
                    <div class="section-toggle" onclick="toggleSection('let-const-theory')">
                        <h3><i class="fas fa-book"></i> Teoría</h3>
                        <i class="fas fa-chevron-down toggle-icon"></i>
                    </div>
                    <div id="let-const-theory" class="theory-content">
                        <div class="theory-grid">
                            <div class="theory-card">
                                <h4><i class="fas fa-tag"></i> Declaraciones de Variables</h4>
                                <div class="theory-list">
                                    <div class="theory-item clickable" onclick="openModal('var-modal')">
                                        <code>var</code>
                                        <span>Scope de función, se puede redeclarar</span>
                                        <i class="fas fa-info-circle"></i>
                                    </div>
                                    <div class="theory-item clickable" onclick="openModal('let-modal')">
                                        <code>let</code>
                                        <span>Scope de bloque, no se puede redeclarar</span>
                                        <i class="fas fa-info-circle"></i>
                                    </div>
                                    <div class="theory-item clickable" onclick="openModal('const-modal')">
                                        <code>const</code>
                                        <span>Scope de bloque, valor inmutable</span>
                                        <i class="fas fa-info-circle"></i>
                                    </div>
                                </div>
                            </div>

                            <div class="theory-card">
                                <h4><i class="fas fa-exclamation-triangle"></i> Diferencias Importantes</h4>
                                <div class="theory-list">
                                    <div class="theory-item clickable" onclick="openModal('hoisting-modal')">
                                        <code>Hoisting</code>
                                        <span>var se eleva, let/const no</span>
                                        <i class="fas fa-info-circle"></i>
                                    </div>
                                    <div class="theory-item clickable" onclick="openModal('tdz-modal')">
                                        <code>TDZ</code>
                                        <span>Temporal Dead Zone en let/const</span>
                                        <i class="fas fa-info-circle"></i>
                                    </div>
                                    <div class="theory-item clickable" onclick="openModal('scope-modal')">
                                        <code>Scope</code>
                                        <span>Bloque vs función</span>
                                        <i class="fas fa-info-circle"></i>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="example-section">
                    <div class="section-toggle" onclick="toggleSection('let-const-example')">
                        <h3><i class="fas fa-code"></i> Ejemplo Práctico</h3>
                        <i class="fas fa-chevron-down toggle-icon"></i>
                    </div>
                    <div id="let-const-example" class="example-content collapsed">
                        <div class="example-tabs">
                            <button class="tab-btn active" onclick="showExampleTab('let-const', 'basic')">Básico</button>
                            <button class="tab-btn" onclick="showExampleTab('let-const', 'advanced')">Avanzado</button>
                            <button class="tab-btn" onclick="showExampleTab('let-const', 'interactive')">Interactivo</button>
                        </div>

                        <div id="let-const-basic" class="example-tab-content active">
                            <div class="code-example">
                                <div class="code-header">
                                    <span class="code-title">Declaraciones Básicas</span>
                                    <button class="btn btn-sm btn-primary" onclick="runCode('let-const-basic-code')">
                                        <i class="fas fa-play"></i> Ejecutar
                                    </button>
                                </div>
                                <div class="code-block">
                                    <pre><code class="language-javascript" id="let-const-basic-code">// Declaraciones modernas
let nombre = "Ana";
const edad = 25;
var ciudad = "Madrid"; // Evitar usar var

// Scope de bloque
if (true) {
    let bloqueVariable = "Solo en este bloque";
    const bloqueConstante = "También solo aquí";
    var funcionVariable = "Accesible fuera del bloque";
}

console.log("Nombre:", nombre);
console.log("Edad:", edad);
console.log("Ciudad:", ciudad);
// console.log(bloqueVariable); // Error: no definida
console.log("Variable de función:", funcionVariable);</code></pre>
                                </div>
                                <div class="code-output" id="let-const-basic-output"></div>
                            </div>
                        </div>

                        <div id="let-const-advanced" class="example-tab-content">
                            <div class="code-example">
                                <div class="code-header">
                                    <span class="code-title">Hoisting y Temporal Dead Zone</span>
                                    <button class="btn btn-sm btn-primary" onclick="runCode('let-const-advanced-code')">
                                        <i class="fas fa-play"></i> Ejecutar
                                    </button>
                                </div>
                                <div class="code-block">
                                    <pre><code class="language-javascript" id="let-const-advanced-code">// Hoisting con var
console.log("Var antes:", varVariable); // undefined (no error)
var varVariable = "Soy var";

// Temporal Dead Zone con let/const
try {
    console.log("Let antes:", letVariable); // Error!
} catch (e) {
    console.log("Error TDZ:", e.message);
}
let letVariable = "Soy let";

// Const con objetos
const usuario = {
    nombre: "Carlos",
    edad: 30
};

usuario.edad = 31; // ✅ Permitido (propiedad mutable)
// usuario = {}; // ❌ Error (reasignación no permitida)

console.log("Usuario:", usuario);</code></pre>
                                </div>
                                <div class="code-output" id="let-const-advanced-output"></div>
                            </div>
                        </div>

                        <div id="let-const-interactive" class="example-tab-content">
                            <div class="interactive-example">
                                <h4>🎮 Prueba el Scope</h4>
                                <div class="interactive-content">
                                    <div class="input-group">
                                        <label>Variable:</label>
                                        <select id="interactive-var-type">
                                            <option value="var">var</option>
                                            <option value="let">let</option>
                                            <option value="const">const</option>
                                        </select>
                                    </div>
                                    <div class="input-group">
                                        <label>Valor:</label>
                                        <input type="text" id="interactive-var-value" placeholder="Valor de la variable" value="Hola Mundo">
                                    </div>
                                    <button class="btn btn-primary" onclick="testVariableScope()">
                                        <i class="fas fa-flask"></i> Probar Scope
                                    </button>
                                    <div class="interactive-output" id="interactive-output"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="lesson-summary">
                    <h4>📝 Resumen</h4>
                    <div class="summary-content">
                        <p>En esta lección aprendiste sobre:</p>
                        <ul>
                            <li>Las diferencias entre <code>var</code>, <code>let</code> y <code>const</code></li>
                            <li>El concepto de scope de bloque vs función</li>
                            <li>Hoisting y Temporal Dead Zone</li>
                            <li>Cuándo usar cada tipo de declaración</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Lección 2: Arrow Functions -->
    <section id="arrow-functions" class="lesson-section bg-light" data-lesson="arrow-functions">
        <div class="container">
            <div class="lesson-header">
                <div class="lesson-badge">
                    <i class="fas fa-arrow-right"></i>
                    <span>Lección 2</span>
                </div>
                <h2>Arrow Functions</h2>
                <p class="lesson-intro">La sintaxis moderna y concisa para escribir funciones en JavaScript. Más legible, menos código.</p>
                
                <div class="key-points">
                    <h4>🎯 Puntos Clave</h4>
                    <div class="key-points-grid">
                        <div class="key-point">
                            <i class="fas fa-lightbulb"></i>
                            <span>Sintaxis concisa</span>
                        </div>
                        <div class="key-point">
                            <i class="fas fa-lightbulb"></i>
                            <span>No tienen su propio 'this'</span>
                        </div>
                        <div class="key-point">
                            <i class="fas fa-lightbulb"></i>
                            <span>Return implícito</span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="lesson-content">
                <div class="theory-section">
                    <div class="section-toggle" onclick="toggleSection('arrow-functions-theory')">
                        <h3><i class="fas fa-book"></i> Teoría</h3>
                        <i class="fas fa-chevron-down toggle-icon"></i>
                    </div>
                    <div id="arrow-functions-theory" class="theory-content">
                        <div class="theory-grid">
                            <div class="theory-card">
                                <h4><i class="fas fa-arrow-right"></i> Sintaxis Arrow Functions</h4>
                                <div class="theory-list">
                                    <div class="theory-item clickable" onclick="openModal('arrow-syntax-noparams-modal')">
                                        <code>() => {}</code>
                                        <span>Sin parámetros</span>
                                        <i class="fas fa-info-circle"></i>
                                    </div>
                                    <div class="theory-item clickable" onclick="openModal('arrow-syntax-oneparam-modal')">
                                        <code>x => x * 2</code>
                                        <span>Un parámetro, return implícito</span>
                                        <i class="fas fa-info-circle"></i>
                                    </div>
                                    <div class="theory-item clickable" onclick="openModal('arrow-syntax-multiparams-modal')">
                                        <code>(a, b) => a + b</code>
                                        <span>Múltiples parámetros</span>
                                        <i class="fas fa-info-circle"></i>
                                    </div>
                                </div>
                            </div>

                            <div class="theory-card">
                                <h4><i class="fas fa-exclamation-triangle"></i> Diferencias con Function</h4>
                                <div class="theory-list">
                                    <div class="theory-item clickable" onclick="openModal('arrow-this-modal')">
                                        <code>this</code>
                                        <span>No tienen su propio contexto</span>
                                        <i class="fas fa-info-circle"></i>
                                    </div>
                                    <div class="theory-item clickable" onclick="openModal('arrow-arguments-modal')">
                                        <code>arguments</code>
                                        <span>No tienen objeto arguments</span>
                                        <i class="fas fa-info-circle"></i>
                                    </div>
                                    <div class="theory-item clickable" onclick="openModal('arrow-constructor-modal')">
                                        <code>constructor</code>
                                        <span>No pueden ser constructores</span>
                                        <i class="fas fa-info-circle"></i>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="example-section">
                    <div class="section-toggle" onclick="toggleSection('arrow-functions-example')">
                        <h3><i class="fas fa-code"></i> Ejemplo Práctico</h3>
                        <i class="fas fa-chevron-down toggle-icon"></i>
                    </div>
                    <div id="arrow-functions-example" class="example-content collapsed">
                        <div class="example-tabs">
                            <button class="tab-btn active" onclick="showExampleTab('arrow-functions', 'basic')">Básico</button>
                            <button class="tab-btn" onclick="showExampleTab('arrow-functions', 'advanced')">Avanzado</button>
                            <button class="tab-btn" onclick="showExampleTab('arrow-functions', 'interactive')">Interactivo</button>
                        </div>

                        <div id="arrow-functions-basic" class="example-tab-content active">
                            <div class="code-example">
                                <div class="code-header">
                                    <span class="code-title">Sintaxis Básica</span>
                                    <button class="btn btn-sm btn-primary" onclick="runCode('arrow-functions-basic-code')">
                                        <i class="fas fa-play"></i> Ejecutar
                                    </button>
                                </div>
                                <div class="code-block">
                                    <pre><code class="language-javascript" id="arrow-functions-basic-code">// Función tradicional
function sumar(a, b) {
    return a + b;
}

// Arrow function equivalente
const sumarArrow = (a, b) => a + b;

// Con un solo parámetro (sin paréntesis)
const duplicar = x => x * 2;

// Sin parámetros
const saludar = () => "Hola mundo";

// Con múltiples líneas
const procesarDatos = (datos) => {
    const resultado = datos.map(item => item * 2);
    return resultado.filter(item => item > 10);
};

console.log("Suma tradicional:", sumar(5, 3));
console.log("Suma arrow:", sumarArrow(5, 3));
console.log("Duplicar:", duplicar(7));
console.log("Saludar:", saludar());
console.log("Procesar:", procesarDatos([1, 5, 8, 12]));</code></pre>
                                </div>
                                <div class="code-output" id="arrow-functions-basic-output"></div>
                            </div>
                        </div>

                        <div id="arrow-functions-advanced" class="example-tab-content">
                            <div class="code-example">
                                <div class="code-header">
                                    <span class="code-title">Uso con Arrays y Objetos</span>
                                    <button class="btn btn-sm btn-primary" onclick="runCode('arrow-functions-advanced-code')">
                                        <i class="fas fa-play"></i> Ejecutar
                                    </button>
                                </div>
                                <div class="code-block">
                                    <pre><code class="language-javascript" id="arrow-functions-advanced-code">const numeros = [1, 2, 3, 4, 5];
const personas = [
    { nombre: "Ana", edad: 25 },
    { nombre: "Carlos", edad: 30 },
    { nombre: "María", edad: 28 }
];

// Map con arrow function
const cuadrados = numeros.map(n => n * n);

// Filter con arrow function
const pares = numeros.filter(n => n % 2 === 0);

// Reduce con arrow function
const suma = numeros.reduce((acc, n) => acc + n, 0);

// Find con arrow function
const mayor = numeros.find(n => n > 3);

// Sort con arrow function
const ordenados = personas.sort((a, b) => a.edad - b.edad);

console.log("Cuadrados:", cuadrados);
console.log("Pares:", pares);
console.log("Suma total:", suma);
console.log("Mayor que 3:", mayor);
console.log("Ordenados por edad:", ordenados);</code></pre>
                                </div>
                                <div class="code-output" id="arrow-functions-advanced-output"></div>
                            </div>
                        </div>

                        <div id="arrow-functions-interactive" class="example-tab-content">
                            <div class="interactive-example">
                                <h4>🎮 Crea tu Arrow Function</h4>
                                <div class="interactive-content">
                                    <div class="input-group">
                                        <label>Operación:</label>
                                        <select id="interactive-operation">
                                            <option value="sum">Sumar</option>
                                            <option value="multiply">Multiplicar</option>
                                            <option value="power">Elevar al cuadrado</option>
                                            <option value="filter">Filtrar pares</option>
                                        </select>
                                    </div>
                                    <div class="input-group">
                                        <label>Números (separados por comas):</label>
                                        <input type="text" id="interactive-numbers" placeholder="1,2,3,4,5" value="1,2,3,4,5">
                                    </div>
                                    <button class="btn btn-primary" onclick="createArrowFunction()">
                                        <i class="fas fa-magic"></i> Crear Función
                                    </button>
                                    <div class="interactive-output" id="interactive-output"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="lesson-summary">
                    <h4>📝 Resumen</h4>
                    <div class="summary-content">
                        <p>En esta lección aprendiste sobre:</p>
                        <ul>
                            <li>La sintaxis concisa de arrow functions</li>
                            <li>Return implícito en expresiones simples</li>
                            <li>Uso con métodos de array (map, filter, reduce)</li>
                            <li>Diferencias importantes con funciones tradicionales</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Lección 3: Template Literals -->
    <section id="template-literals" class="lesson-section" data-lesson="template-literals">
        <div class="container">
            <div class="lesson-header">
                <div class="lesson-badge">
                    <i class="fas fa-quote-left"></i>
                    <span>Lección 3</span>
                </div>
                <h2>Template Literals</h2>
                <p class="lesson-intro">La forma moderna de trabajar con strings. Interpolación, multilínea y expresiones embebidas.</p>
                
                <div class="key-points">
                    <h4>🎯 Puntos Clave</h4>
                    <div class="key-points-grid">
                        <div class="key-point">
                            <i class="fas fa-lightbulb"></i>
                            <span>Interpolación de variables</span>
                        </div>
                        <div class="key-point">
                            <i class="fas fa-lightbulb"></i>
                            <span>Strings multilínea</span>
                        </div>
                        <div class="key-point">
                            <i class="fas fa-lightbulb"></i>
                            <span>Expresiones embebidas</span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="lesson-content">
                <div class="theory-section">
                    <div class="section-toggle" onclick="toggleSection('template-literals-theory')">
                        <h3><i class="fas fa-book"></i> Teoría</h3>
                        <i class="fas fa-chevron-down toggle-icon"></i>
                    </div>
                    <div id="template-literals-theory" class="theory-content">
                        <div class="theory-grid">
                            <div class="theory-card">
                                <h4><i class="fas fa-quote-left"></i> Sintaxis Template Literals</h4>
                                <div class="theory-list">
                                    <div class="theory-item clickable" onclick="openModal('template-backticks-modal')">
                                        <code>`texto`</code>
                                        <span>Backticks en lugar de comillas</span>
                                        <i class="fas fa-info-circle"></i>
                                    </div>
                                    <div class="theory-item clickable" onclick="openModal('template-interpolation-modal')">
                                        <code>${variable}</code>
                                        <span>Interpolación de variables</span>
                                        <i class="fas fa-info-circle"></i>
                                    </div>
                                    <div class="theory-item clickable" onclick="openModal('template-expressions-modal')">
                                        <code>${expresion}</code>
                                        <span>Evaluación de expresiones</span>
                                        <i class="fas fa-info-circle"></i>
                                    </div>
                                </div>
                            </div>

                            <div class="theory-card">
                                <h4><i class="fas fa-star"></i> Ventajas</h4>
                                <div class="theory-list">
                                    <div class="theory-item clickable" onclick="openModal('template-legibility-modal')">
                                        <code>Legibilidad</code>
                                        <span>Código más limpio y claro</span>
                                        <i class="fas fa-info-circle"></i>
                                    </div>
                                    <div class="theory-item clickable" onclick="openModal('template-multiline-modal')">
                                        <code>Multilínea</code>
                                        <span>Strings sin concatenación</span>
                                        <i class="fas fa-info-circle"></i>
                                    </div>
                                    <div class="theory-item clickable" onclick="openModal('template-flexibility-modal')">
                                        <code>Flexibilidad</code>
                                        <span>Expresiones complejas</span>
                                        <i class="fas fa-info-circle"></i>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="example-section">
                    <div class="section-toggle" onclick="toggleSection('template-literals-example')">
                        <h3><i class="fas fa-code"></i> Ejemplo Práctico</h3>
                        <i class="fas fa-chevron-down toggle-icon"></i>
                    </div>
                    <div id="template-literals-example" class="example-content collapsed">
                        <div class="example-tabs">
                            <button class="tab-btn active" onclick="showExampleTab('template-literals', 'basic')">Básico</button>
                            <button class="tab-btn" onclick="showExampleTab('template-literals', 'advanced')">Avanzado</button>
                            <button class="tab-btn" onclick="showExampleTab('template-literals', 'interactive')">Interactivo</button>
                        </div>

                        <div id="template-literals-basic" class="example-tab-content active">
                            <div class="code-example">
                                <div class="code-header">
                                    <span class="code-title">Interpolación Básica</span>
                                    <button class="btn btn-sm btn-primary" onclick="runCode('template-literals-basic-code')">
                                        <i class="fas fa-play"></i> Ejecutar
                                    </button>
                                </div>
                                <div class="code-block">
                                    <pre><code class="language-javascript" id="template-literals-basic-code">const nombre = "María";
const edad = 28;
const ciudad = "Barcelona";

// Forma tradicional (concatenación)
const mensajeTradicional = "Hola, me llamo " + nombre + 
    ", tengo " + edad + " años y vivo en " + ciudad + ".";

// Con template literals
const mensajeModerno = `Hola, me llamo ${nombre}, tengo ${edad} años y vivo en ${ciudad}.`;

// Con expresiones
const saludo = `¡Hola ${nombre}! El año que viene tendrás ${edad + 1} años.`;

// Multilínea
const carta = `
Estimado/a ${nombre},

Espero que estés bien en ${ciudad}.
Te escribo para informarte que...

Saludos cordiales,
El equipo
`;

console.log("Tradicional:", mensajeTradicional);
console.log("Moderno:", mensajeModerno);
console.log("Con expresiones:", saludo);
console.log("Carta:", carta);</code></pre>
                                </div>
                                <div class="code-output" id="template-literals-basic-output"></div>
                            </div>
                        </div>

                        <div id="template-literals-advanced" class="example-tab-content">
                            <div class="code-example">
                                <div class="code-header">
                                    <span class="code-title">Uso Avanzado</span>
                                    <button class="btn btn-sm btn-primary" onclick="runCode('template-literals-advanced-code')">
                                        <i class="fas fa-play"></i> Ejecutar
                                    </button>
                                </div>
                                <div class="code-block">
                                    <pre><code class="language-javascript" id="template-literals-advanced-code">// Función que genera HTML
function crearTarjetaUsuario(usuario) {
    return `
        <div class="usuario-card">
            <h3>${usuario.nombre}</h3>
            <p>Edad: ${usuario.edad} años</p>
            <p>Email: ${usuario.email}</p>
            <p>Activo: ${usuario.activo ? 'Sí' : 'No'}</p>
        </div>
    `;
}

// Función con template literals anidados
function generarReporte(datos) {
    const fecha = new Date().toLocaleDateString();
    const total = datos.reduce((sum, item) => sum + item.valor, 0);
    
    return `
        REPORTE - ${fecha}
        ===================
        Total de elementos: ${datos.length}
        Suma total: $${total.toFixed(2)}
        
        Detalles:
        ${datos.map(item => `- ${item.nombre}: $${item.valor}`).join('\n')}
    `;
}

// Uso de las funciones
const usuario = {
    nombre: "Carlos",
    edad: 30,
    email: "carlos@email.com",
    activo: true
};

const datos = [
    { nombre: "Producto A", valor: 100 },
    { nombre: "Producto B", valor: 200 },
    { nombre: "Producto C", valor: 150 }
];

console.log("Tarjeta usuario:", crearTarjetaUsuario(usuario));
console.log("Reporte:", generarReporte(datos));</code></pre>
                                </div>
                                <div class="code-output" id="template-literals-advanced-output"></div>
                            </div>
                        </div>

                        <div id="template-literals-interactive" class="example-tab-content">
                            <div class="interactive-example">
                                <h4>🎮 Generador de Mensajes</h4>
                                <div class="interactive-content">
                                    <div class="input-group">
                                        <label>Nombre:</label>
                                        <input type="text" id="interactive-name" placeholder="Tu nombre" value="Ana">
                                    </div>
                                    <div class="input-group">
                                        <label>Edad:</label>
                                        <input type="number" id="interactive-age" placeholder="Tu edad" value="25">
                                    </div>
                                    <div class="input-group">
                                        <label>Ciudad:</label>
                                        <input type="text" id="interactive-city" placeholder="Tu ciudad" value="Madrid">
                                    </div>
                                    <button class="btn btn-primary" onclick="generateMessage()">
                                        <i class="fas fa-magic"></i> Generar Mensaje
                                    </button>
                                    <div class="interactive-output" id="interactive-output"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="lesson-summary">
                    <h4>📝 Resumen</h4>
                    <div class="summary-content">
                        <p>En esta lección aprendiste sobre:</p>
                        <ul>
                            <li>La sintaxis de template literals con backticks</li>
                            <li>Interpolación de variables con <code>${}</code></li>
                            <li>Creación de strings multilínea</li>
                            <li>Evaluación de expresiones dentro de strings</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Ejercicios Prácticos -->
    <section class="exercises-section">
        <div class="container">
            <h2>💪 Ejercicios Prácticos</h2>
            <p class="section-description">Pon a prueba tus conocimientos con estos ejercicios prácticos de JavaScript moderno.</p>
            
            <div class="exercises-grid">
                <div class="exercise-card">
                    <div class="exercise-header">
                        <h3>Conversor de Funciones</h3>
                        <span class="difficulty beginner">Principiante</span>
                    </div>
                    <div class="exercise-content">
                        <p>Convierte las siguientes funciones tradicionales a arrow functions:</p>
                        <div class="exercise-requirements">
                            <h4>Requisitos:</h4>
                            <ul>
                                <li>Convertir función de suma</li>
                                <li>Convertir función de multiplicación</li>
                                <li>Convertir función de filtrado</li>
                                <li>Usar template literals para mostrar resultados</li>
                            </ul>
                        </div>
                        <button class="btn btn-outline" onclick="toggleCode('exercise1-solution')">
                            <i class="fas fa-eye"></i> Ver Solución
                        </button>
                        <div id="exercise1-solution" class="code-block" style="display: none;">
                            <pre><code class="language-javascript">// Funciones tradicionales
function sumar(a, b) {
    return a + b;
}

function multiplicar(x, y) {
    return x * y;
}

function filtrarPares(numeros) {
    return numeros.filter(function(n) {
        return n % 2 === 0;
    });
}

// Convertidas a arrow functions
const sumarArrow = (a, b) => a + b;
const multiplicarArrow = (x, y) => x * y;
const filtrarParesArrow = numeros => numeros.filter(n => n % 2 === 0);

// Uso con template literals
const a = 5, b = 3;
const numeros = [1, 2, 3, 4, 5, 6];

console.log(`Suma: ${sumarArrow(a, b)}`);
console.log(`Multiplicación: ${multiplicarArrow(a, b)}`);
console.log(`Pares: ${filtrarParesArrow(numeros)}`);</code></pre>
                        </div>
                    </div>
                </div>

                <div class="exercise-card">
                    <div class="exercise-header">
                        <h3>Generador de HTML</h3>
                        <span class="difficulty intermediate">Intermedio</span>
                    </div>
                    <div class="exercise-content">
                        <p>Crea una función que genere HTML usando template literals y arrow functions.</p>
                        <div class="exercise-requirements">
                            <h4>Requisitos:</h4>
                            <ul>
                                <li>Usar template literals para HTML</li>
                                <li>Arrow functions para procesar datos</li>
                                <li>Destructuring para extraer propiedades</li>
                                <li>Generar lista de productos</li>
                            </ul>
                        </div>
                        <button class="btn btn-outline" onclick="toggleCode('exercise2-solution')">
                            <i class="fas fa-eye"></i> Ver Solución
                        </button>
                        <div id="exercise2-solution" class="code-block" style="display: none;">
                            <pre><code class="language-javascript">const productos = [
    { id: 1, nombre: "Laptop", precio: 999, categoria: "Electrónicos" },
    { id: 2, nombre: "Mouse", precio: 25, categoria: "Accesorios" },
    { id: 3, nombre: "Teclado", precio: 75, categoria: "Accesorios" }
];

// Arrow function para crear tarjeta de producto
const crearTarjetaProducto = ({ nombre, precio, categoria }) => `
    <div class="producto-card">
        <h3>${nombre}</h3>
        <p class="precio">$${precio}</p>
        <p class="categoria">${categoria}</p>
    </div>
`;

// Arrow function para filtrar por categoría
const filtrarPorCategoria = (productos, categoria) => 
    productos.filter(producto => producto.categoria === categoria);

// Generar HTML
const productosAccesorios = filtrarPorCategoria(productos, "Accesorios");
const htmlAccesorios = productosAccesorios
    .map(crearTarjetaProducto)
    .join('\n');

console.log(htmlAccesorios);</code></pre>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Navegación entre módulos -->
    <section class="module-navigation">
        <div class="container">
            <div class="nav-buttons">
                <a href="modulo1-fundamentos.html" class="btn btn-outline">
                    <i class="fas fa-arrow-left"></i> Módulo Anterior
                </a>
                <a href="index.html#modules" class="btn btn-primary">
                    <i class="fas fa-home"></i> Ver Todos los Módulos
                </a>
                <a href="modulo3-dom.html" class="btn btn-outline">
                    Siguiente Módulo <i class="fas fa-arrow-right"></i>
                </a>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>JavaScript Academy</h3>
                    <p>Aprende JavaScript desde cero hasta nivel profesional con ejemplos prácticos y ejercicios interactivos.</p>
                </div>
                <div class="footer-section">
                    <h4>Módulos</h4>
                    <ul>
                        <li><a href="modulo1-fundamentos.html">Fundamentos</a></li>
                        <li><a href="modulo2-moderno.html">JavaScript Moderno</a></li>
                        <li><a href="modulo3-dom.html">DOM Manipulation</a></li>
                        <li><a href="modulo4-asincrono.html">Programación Asíncrona</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h4>Recursos</h4>
                    <ul>
                        <li><a href="index.html#projects">Proyectos</a></li>
                        <li><a href="index.html#resources">Recursos</a></li>
                        <li><a href="index.html#contact">Contacto</a></li>
                    </ul>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2024 JavaScript Academy. Todos los derechos reservados.</p>
            </div>
        </div>
    </footer>

    <script src="script.js"></script>
    <script>
        // Funciones de modal
        function openModal(modalId) {
            const modal = document.getElementById(modalId);
            if (modal) {
                modal.style.display = 'block';
                document.body.style.overflow = 'hidden'; // Prevenir scroll
            }
        }

        function closeModal(modalId) {
            const modal = document.getElementById(modalId);
            if (modal) {
                modal.style.display = 'none';
                document.body.style.overflow = 'auto'; // Restaurar scroll
            }
        }

        // Estado del módulo
        let moduleProgress = 0;
        let completedLessons = new Set();
        let currentSection = 'let-const';

        // Funciones de progreso
        function updateProgress() {
            const totalLessons = 6;
            const progress = (completedLessons.size / totalLessons) * 100;
            moduleProgress = Math.round(progress);
            
            const progressFill = document.getElementById('moduleProgress');
            const progressPercentage = document.querySelector('.progress-percentage');
            
            if (progressFill) {
                progressFill.style.width = progress + '%';
            }
            if (progressPercentage) {
                progressPercentage.textContent = progress + '%';
            }
        }

        function markLessonComplete(lessonId) {
            completedLessons.add(lessonId);
            updateProgress();
            
            const navItem = document.querySelector(`[data-section="${lessonId}"]`);
            if (navItem) {
                const statusIcon = navItem.querySelector('.nav-item-status i');
                statusIcon.className = 'fas fa-check-circle';
                statusIcon.style.color = '#28a745';
            }
        }

        // Funciones de navegación
        function toggleSection(sectionId) {
            const section = document.getElementById(sectionId);
            const toggleIcon = section.previousElementSibling.querySelector('.toggle-icon');
            
            if (section.classList.contains('collapsed')) {
                section.classList.remove('collapsed');
                toggleIcon.style.transform = 'rotate(180deg)';
            } else {
                section.classList.add('collapsed');
                toggleIcon.style.transform = 'rotate(0deg)';
            }
        }

        function showExampleTab(lesson, tab) {
            const tabContents = document.querySelectorAll(`#${lesson}-example .example-tab-content`);
            const tabButtons = document.querySelectorAll(`#${lesson}-example .tab-btn`);
            
            tabContents.forEach(content => content.classList.remove('active'));
            tabButtons.forEach(button => button.classList.remove('active'));
            
            document.getElementById(`${lesson}-${tab}`).classList.add('active');
            event.target.classList.add('active');
        }

        // Funciones de código
        function runCode(codeId) {
            const codeElement = document.getElementById(codeId);
            const outputId = codeId.replace('-code', '-output');
            const outputElement = document.getElementById(outputId);
            
            if (!codeElement || !outputElement) return;
            
            const code = codeElement.textContent;
            
            const originalLog = console.log;
            let output = '';
            console.log = function(...args) {
                output += args.join(' ') + '\n';
                originalLog.apply(console, args);
            };
            
            try {
                eval(code);
                outputElement.innerHTML = `<pre class="output-content">${output || 'Código ejecutado correctamente'}</pre>`;
                outputElement.style.display = 'block';
            } catch (error) {
                outputElement.innerHTML = `<pre class="output-error">Error: ${error.message}</pre>`;
                outputElement.style.display = 'block';
            } finally {
                console.log = originalLog;
            }
        }

        // Funciones interactivas
        function testVariableScope() {
            const varType = document.getElementById('interactive-var-type').value;
            const varValue = document.getElementById('interactive-var-value').value;
            const output = document.getElementById('interactive-output');
            
            let result = '';
            
            try {
                if (varType === 'var') {
                    eval(`var testVar = "${varValue}";`);
                    result = `✅ Variable 'var' creada: ${testVar}`;
                } else if (varType === 'let') {
                    eval(`let testLet = "${varValue}";`);
                    result = `✅ Variable 'let' creada: ${testLet}`;
                } else if (varType === 'const') {
                    eval(`const testConst = "${varValue}";`);
                    result = `✅ Constante 'const' creada: ${testConst}`;
                }
            } catch (error) {
                result = `❌ Error: ${error.message}`;
            }
            
            output.innerHTML = `<div class="success">${result}</div>`;
        }

        function createArrowFunction() {
            const operation = document.getElementById('interactive-operation').value;
            const numbersInput = document.getElementById('interactive-numbers').value;
            const output = document.getElementById('interactive-output');
            
            const numbers = numbersInput.split(',').map(n => parseInt(n.trim()));
            
            let result = '';
            let arrowFunction = '';
            
            switch (operation) {
                case 'sum':
                    arrowFunction = 'const sumar = (arr) => arr.reduce((acc, n) => acc + n, 0);';
                    result = `Suma: ${numbers.reduce((acc, n) => acc + n, 0)}`;
                    break;
                case 'multiply':
                    arrowFunction = 'const multiplicar = (arr) => arr.reduce((acc, n) => acc * n, 1);';
                    result = `Multiplicación: ${numbers.reduce((acc, n) => acc * n, 1)}`;
                    break;
                case 'power':
                    arrowFunction = 'const elevar = (arr) => arr.map(n => n * n);';
                    result = `Cuadrados: [${numbers.map(n => n * n).join(', ')}]`;
                    break;
                case 'filter':
                    arrowFunction = 'const filtrarPares = (arr) => arr.filter(n => n % 2 === 0);';
                    result = `Pares: [${numbers.filter(n => n % 2 === 0).join(', ')}]`;
                    break;
            }
            
            output.innerHTML = `
                <div class="success">
                    <h5>✅ Arrow Function Creada:</h5>
                    <pre class="object-display">${arrowFunction}</pre>
                    <p><strong>Resultado:</strong> ${result}</p>
                </div>
            `;
        }

        function generateMessage() {
            const name = document.getElementById('interactive-name').value;
            const age = parseInt(document.getElementById('interactive-age').value);
            const city = document.getElementById('interactive-city').value;
            const output = document.getElementById('interactive-output');
            
            if (!name || !age || !city) {
                output.innerHTML = '<div class="error">Por favor, completa todos los campos</div>';
                return;
            }
            
            const message = `
                <div class="success">
                    <h5>✅ Mensaje Generado con Template Literals:</h5>
                    <div class="object-display">
Hola, me llamo ${name}, tengo ${age} años y vivo en ${city}.

El año que viene tendré ${age + 1} años.

¡Espero que estés bien en ${city}!
                    </div>
                </div>
            `;
            
            output.innerHTML = message;
        }

        // Observador de intersección para progreso
        function setupProgressObserver() {
            const lessons = document.querySelectorAll('.lesson-section');
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        const lessonId = entry.target.dataset.lesson;
                        if (lessonId && !completedLessons.has(lessonId)) {
                            setTimeout(() => {
                                markLessonComplete(lessonId);
                            }, 3000);
                        }
                    }
                });
            }, { threshold: 0.5 });

            lessons.forEach(lesson => observer.observe(lesson));
        }

        // Navegación suave
        function setupSmoothNavigation() {
            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function (e) {
                    e.preventDefault();
                    const target = document.querySelector(this.getAttribute('href'));
                    if (target) {
                        target.scrollIntoView({
                            behavior: 'smooth',
                            block: 'start'
                        });
                        
                        const sectionId = target.id;
                        if (sectionId) {
                            currentSection = sectionId;
                            updateNavigationState();
                        }
                    }
                });
            });
        }

        function updateNavigationState() {
            document.querySelectorAll('.nav-item').forEach(item => {
                item.classList.remove('active');
            });
            
            const activeItem = document.querySelector(`[data-section="${currentSection}"]`);
            if (activeItem) {
                activeItem.classList.add('active');
            }
        }

        function updateBreadcrumb() {
            const currentPage = document.getElementById('current-page');
            if (currentPage) {
                currentPage.textContent = 'JavaScript Moderno (ES6+)';
            }
        }

        // Inicializar
        document.addEventListener('DOMContentLoaded', function() {
            updateBreadcrumb();
            setupSmoothNavigation();
            setupProgressObserver();
            Prism.highlightAll();
            updateNavigationState();
        });

        // Funciones globales
        window.toggleCode = function(codeId) {
            const codeBlock = document.getElementById(codeId);
            if (codeBlock.style.display === 'none') {
                codeBlock.style.display = 'block';
                Prism.highlightAll();
            } else {
                codeBlock.style.display = 'none';
            }
        };

        window.toggleSection = toggleSection;
        window.showExampleTab = showExampleTab;
        window.runCode = runCode;
        window.testVariableScope = testVariableScope;
        window.createArrowFunction = createArrowFunction;
        window.generateMessage = generateMessage;
    </script>

    <!-- Modales Explicativos - Lección 1: Let, Const y Var -->
    <div id="var-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2><i class="fas fa-tag"></i> var - Declaración Clásica</h2>
                <div class="modal-actions">
                    <button class="audio-btn" onclick="readModalContent('var-modal')" title="Leer contenido">
                        <i class="fas fa-volume-up"></i>
                    </button>
                    <span class="close" onclick="closeModal('var-modal')">&times;</span>
                </div>
            </div>
            <div class="modal-body">
                <h3>¿Qué es var?</h3>
                <p><code>var</code> es la forma clásica de declarar variables en JavaScript. Aunque sigue funcionando, se recomienda usar <code>let</code> o <code>const</code> en código moderno.</p>
                
                <h3>Características de var:</h3>
                <ul>
                    <li><strong>Scope de función:</strong> La variable existe en toda la función donde se declara</li>
                    <li><strong>Hoisting:</strong> La declaración se eleva al inicio de la función</li>
                    <li><strong>Se puede redeclarar:</strong> Puedes declarar la misma variable múltiples veces</li>
                    <li><strong>Sin Temporal Dead Zone:</strong> Puedes usar la variable antes de declararla (valor undefined)</li>
                </ul>
                
                <h3>Ejemplo:</h3>
                <div class="code-block">
                    <pre><code class="language-javascript">// Scope de función
function ejemplo() {
    console.log(x); // undefined (hoisting)
    var x = 10;
    
    if (true) {
        var y = 20; // Accesible fuera del if
    }
    console.log(y); // 20 - NO error
}

// Redeclaración
var nombre = "Ana";
var nombre = "Carlos"; // ✅ Permitido (pero confuso)</code></pre>
                </div>
                
                <h3>Problemas de var:</h3>
                <div class="code-block">
                    <pre><code class="language-javascript">// Problema 1: Scope confuso
for (var i = 0; i < 3; i++) {
    setTimeout(() => console.log(i), 1000);
}
// Imprime: 3, 3, 3 (no 0, 1, 2)

// Problema 2: Contaminación global
var x = 10;
if (true) {
    var x = 20; // ¡Sobrescribe la x externa!
}
console.log(x); // 20</code></pre>
                </div>
                
                <h3>⚠️ Recomendación:</h3>
                <p>En código moderno ES6+, evita usar <code>var</code>. Usa <code>let</code> para variables que cambian y <code>const</code> para constantes.</p>
            </div>
        </div>
    </div>

    <div id="let-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2><i class="fas fa-tag"></i> let - Declaración Moderna</h2>
                <div class="modal-actions">
                    <button class="audio-btn" onclick="readModalContent('let-modal')" title="Leer contenido">
                        <i class="fas fa-volume-up"></i>
                    </button>
                    <span class="close" onclick="closeModal('let-modal')">&times;</span>
                </div>
            </div>
            <div class="modal-body">
                <h3>¿Qué es let?</h3>
                <p><code>let</code> es la forma moderna de declarar variables en JavaScript ES6+. Tiene mejor scope y evita problemas de <code>var</code>.</p>
                
                <h3>Características de let:</h3>
                <ul>
                    <li><strong>Scope de bloque:</strong> La variable solo existe en el bloque {...} donde se declara</li>
                    <li><strong>No se puede redeclarar:</strong> Previene errores al intentar declarar dos veces</li>
                    <li><strong>Temporal Dead Zone (TDZ):</strong> No puedes usar la variable antes de declararla</li>
                    <li><strong>Valor reasignable:</strong> Puedes cambiar el valor de la variable</li>
                </ul>
                
                <h3>Ejemplo:</h3>
                <div class="code-block">
                    <pre><code class="language-javascript">// Scope de bloque
let nombre = "Ana";

if (true) {
    let nombre = "Carlos"; // Variable diferente
    console.log(nombre); // "Carlos"
}

console.log(nombre); // "Ana"

// Reasignación permitida
let edad = 25;
edad = 26; // ✅ Permitido

// Redeclaración NO permitida
let x = 10;
// let x = 20; // ❌ Error: x ya está declarada</code></pre>
                </div>
                
                <h3>Ventajas de let:</h3>
                <div class="code-block">
                    <pre><code class="language-javascript">// Soluciona el problema del loop
for (let i = 0; i < 3; i++) {
    setTimeout(() => console.log(i), 1000);
}
// Imprime: 0, 1, 2 ✅

// Scope de bloque
{
    let privada = "Solo aquí";
    console.log(privada); // "Solo aquí"
}
// console.log(privada); // ❌ Error: no definida</code></pre>
                </div>
                
                <h3>Cuándo usar let:</h3>
                <ul>
                    <li>Cuando el valor de la variable va a cambiar</li>
                    <li>Para contadores de loops</li>
                    <li>Para variables que se reasignan</li>
                </ul>
                
                <h3>⚠️ Temporal Dead Zone:</h3>
                <div class="code-block">
                    <pre><code class="language-javascript">// console.log(x); // ❌ Error: TDZ
let x = 10; // Aquí termina la TDZ
console.log(x); // ✅ 10</code></pre>
                </div>
            </div>
        </div>
    </div>

    <div id="const-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2><i class="fas fa-tag"></i> const - Constantes</h2>
                <div class="modal-actions">
                    <button class="audio-btn" onclick="readModalContent('const-modal')" title="Leer contenido">
                        <i class="fas fa-volume-up"></i>
                    </button>
                    <span class="close" onclick="closeModal('const-modal')">&times;</span>
                </div>
            </div>
            <div class="modal-body">
                <h3>¿Qué es const?</h3>
                <p><code>const</code> declara constantes en JavaScript ES6+. Una vez asignado, el valor NO se puede reasignar.</p>
                
                <h3>Características de const:</h3>
                <ul>
                    <li><strong>Scope de bloque:</strong> Como let, solo existe en su bloque</li>
                    <li><strong>No se puede reasignar:</strong> El valor no cambia después de la asignación inicial</li>
                    <li><strong>Debe inicializarse:</strong> Debes asignar un valor al declarar</li>
                    <li><strong>Temporal Dead Zone (TDZ):</strong> Como let, no puedes usarla antes de declararla</li>
                </ul>
                
                <h3>Ejemplo Básico:</h3>
                <div class="code-block">
                    <pre><code class="language-javascript">// Declaración e inicialización
const PI = 3.14159;
const NOMBRE = "Ana";

// Reasignación NO permitida
// PI = 3.14; // ❌ Error: no se puede reasignar

// Debe inicializarse
// const x; // ❌ Error: falta inicialización
const x = 10; // ✅ Correcto</code></pre>
                </div>
                
                <h3>⚠️ Importante - Objetos y Arrays:</h3>
                <p>Con objetos y arrays, <code>const</code> NO hace que el contenido sea inmutable, solo la referencia.</p>
                <div class="code-block">
                    <pre><code class="language-javascript">// Objeto con const
const usuario = {
    nombre: "Ana",
    edad: 25
};

// ✅ Puedes modificar propiedades
usuario.edad = 26;
usuario.ciudad = "Madrid";
console.log(usuario); // { nombre: "Ana", edad: 26, ciudad: "Madrid" }

// ❌ NO puedes reasignar el objeto
// usuario = {}; // Error!

// Array con const
const numeros = [1, 2, 3];

// ✅ Puedes modificar el contenido
numeros.push(4);
numeros[0] = 10;
console.log(numeros); // [10, 2, 3, 4]

// ❌ NO puedes reasignar el array
// numeros = []; // Error!</code></pre>
                </div>
                
                <h3>Inmutabilidad Real:</h3>
                <p>Si necesitas que el contenido también sea inmutable:</p>
                <div class="code-block">
                    <pre><code class="language-javascript">// Object.freeze() para inmutabilidad
const config = Object.freeze({
    API_URL: "https://api.example.com",
    VERSION: "1.0.0"
});

// Intentar modificar no causa error, simplemente no funciona
config.API_URL = "otro"; // Silenciosamente ignorado
console.log(config.API_URL); // "https://api.example.com"</code></pre>
                </div>
                
                <h3>Cuándo usar const:</h3>
                <ul>
                    <li><strong>Por defecto:</strong> Usa const siempre que puedas</li>
                    <li>Para valores que no deben cambiar</li>
                    <li>Para objetos y arrays (aunque su contenido cambie)</li>
                    <li>Para funciones declaradas</li>
                    <li>Para imports de módulos</li>
                </ul>
                
                <h3>⚠️ Buena Práctica:</h3>
                <p><strong>Regla general:</strong> Usa <code>const</code> por defecto. Solo usa <code>let</code> si realmente necesitas reasignar la variable.</p>
            </div>
        </div>
    </div>

    <div id="hoisting-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2><i class="fas fa-arrow-up"></i> Hoisting</h2>
                <div class="modal-actions">
                    <button class="audio-btn" onclick="readModalContent('hoisting-modal')" title="Leer contenido">
                        <i class="fas fa-volume-up"></i>
                    </button>
                    <span class="close" onclick="closeModal('hoisting-modal')">&times;</span>
                </div>
            </div>
            <div class="modal-body">
                <h3>¿Qué es Hoisting?</h3>
                <p><strong>Hoisting</strong> (elevación) es un comportamiento de JavaScript donde las declaraciones de variables y funciones se "mueven" al inicio de su scope antes de la ejecución del código.</p>
                
                <h3>Hoisting con var:</h3>
                <div class="code-block">
                    <pre><code class="language-javascript">console.log(x); // undefined (no error)
var x = 10;
console.log(x); // 10

// JavaScript lo interpreta así:
var x; // Declaración elevada
console.log(x); // undefined
x = 10; // Asignación permanece aquí
console.log(x); // 10</code></pre>
                </div>
                
                <h3>Hoisting con let y const:</h3>
                <p>Con <code>let</code> y <code>const</code>, las declaraciones también se elevan PERO entran en la <strong>Temporal Dead Zone (TDZ)</strong>.</p>
                <div class="code-block">
                    <pre><code class="language-javascript">// console.log(y); // ❌ ReferenceError: Cannot access 'y' before initialization
let y = 20;

// console.log(z); // ❌ ReferenceError: Cannot access 'z' before initialization
const z = 30;</code></pre>
                </div>
                
                <h3>Hoisting de Funciones:</h3>
                <div class="code-block">
                    <pre><code class="language-javascript">// ✅ Las funciones declaradas se elevan completamente
saludar(); // "¡Hola!" - Funciona

function saludar() {
    console.log("¡Hola!");
}

// ❌ Las funciones expresadas NO se elevan
// despedir(); // Error: despedir no es una función
const despedir = function() {
    console.log("¡Adiós!");
};</code></pre>
                </div>
                
                <h3>Ejemplo Completo:</h3>
                <div class="code-block">
                    <pre><code class="language-javascript">// Código escrito
console.log(nombre); // undefined
var nombre = "Ana";

// console.log(edad); // Error: TDZ
let edad = 25;

saludar(); // "Hola"

function saludar() {
    console.log("Hola");
}

// JavaScript lo interpreta así:
var nombre; // var elevada
function saludar() { // función elevada
    console.log("Hola");
}

console.log(nombre); // undefined
nombre = "Ana";

let edad; // let elevada PERO en TDZ
// console.log(edad); // Error: TDZ
edad = 25;</code></pre>
                </div>
                
                <h3>Comparación:</h3>
                <table style="width: 100%; border-collapse: collapse; margin: 1rem 0;">
                    <tr style="background: #f8f9fa;">
                        <th style="padding: 0.5rem; border: 1px solid #dee2e6;">Declaración</th>
                        <th style="padding: 0.5rem; border: 1px solid #dee2e6;">Hoisting</th>
                        <th style="padding: 0.5rem; border: 1px solid #dee2e6;">Valor antes de declaración</th>
                    </tr>
                    <tr>
                        <td style="padding: 0.5rem; border: 1px solid #dee2e6;"><code>var</code></td>
                        <td style="padding: 0.5rem; border: 1px solid #dee2e6;">✅ Sí</td>
                        <td style="padding: 0.5rem; border: 1px solid #dee2e6;"><code>undefined</code></td>
                    </tr>
                    <tr style="background: #f8f9fa;">
                        <td style="padding: 0.5rem; border: 1px solid #dee2e6;"><code>let</code></td>
                        <td style="padding: 0.5rem; border: 1px solid #dee2e6;">✅ Sí (TDZ)</td>
                        <td style="padding: 0.5rem; border: 1px solid #dee2e6;">❌ ReferenceError</td>
                    </tr>
                    <tr>
                        <td style="padding: 0.5rem; border: 1px solid #dee2e6;"><code>const</code></td>
                        <td style="padding: 0.5rem; border: 1px solid #dee2e6;">✅ Sí (TDZ)</td>
                        <td style="padding: 0.5rem; border: 1px solid #dee2e6;">❌ ReferenceError</td>
                    </tr>
                    <tr style="background: #f8f9fa;">
                        <td style="padding: 0.5rem; border: 1px solid #dee2e6;"><code>function</code></td>
                        <td style="padding: 0.5rem; border: 1px solid #dee2e6;">✅ Completamente</td>
                        <td style="padding: 0.5rem; border: 1px solid #dee2e6;">✅ Función completa</td>
                    </tr>
                </table>
                
                <h3>⚠️ Buena Práctica:</h3>
                <ul>
                    <li>Declara variables al inicio de su scope</li>
                    <li>Usa <code>let</code> y <code>const</code> en lugar de <code>var</code></li>
                    <li>No confíes en hoisting - declara antes de usar</li>
                </ul>
            </div>
        </div>
    </div>

    <div id="tdz-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2><i class="fas fa-skull-crossbones"></i> Temporal Dead Zone (TDZ)</h2>
                <div class="modal-actions">
                    <button class="audio-btn" onclick="readModalContent('tdz-modal')" title="Leer contenido">
                        <i class="fas fa-volume-up"></i>
                    </button>
                    <span class="close" onclick="closeModal('tdz-modal')">&times;</span>
                </div>
            </div>
            <div class="modal-body">
                <h3>¿Qué es la Temporal Dead Zone?</h3>
                <p>La <strong>Temporal Dead Zone (TDZ)</strong> es el período entre el inicio del scope y la línea donde se declara una variable <code>let</code> o <code>const</code>. Durante este período, NO puedes acceder a la variable.</p>
                
                <h3>Visualización de la TDZ:</h3>
                <pre><code class="language-javascript">{
    // ⚠️ TDZ empieza aquí
    console.log(x); // ❌ ReferenceError
    console.log(y); // ❌ ReferenceError
    
    let x = 10; // ✅ TDZ de x termina aquí
    console.log(x); // ✅ 10
    
    const y = 20; // ✅ TDZ de y termina aquí
    console.log(y); // ✅ 20
}</code></pre>
                
                <h3>Diferencia con var:</h3>
                <pre><code class="language-javascript">// Con var - NO hay TDZ
console.log(a); // undefined (no error)
var a = 10;

// Con let - SÍ hay TDZ
// console.log(b); // ❌ ReferenceError
let b = 20;

// Con const - SÍ hay TDZ
// console.log(c); // ❌ ReferenceError
const c = 30;</code></pre>
                
                <h3>TDZ en Funciones:</h3>
                <pre><code class="language-javascript">function ejemplo() {
    // TDZ de x empieza aquí
    
    // console.log(x); // ❌ Error
    
    if (true) {
        // console.log(x); // ❌ Error - todavía en TDZ
        let x = 10; // TDZ termina
        console.log(x); // ✅ 10
    }
    
    // console.log(x); // ❌ Error - fuera de scope
}</code></pre>
                
                <h3>TDZ con typeof:</h3>
                <p>Algo interesante: <code>typeof</code> también falla en la TDZ.</p>
                <pre><code class="language-javascript">// Con var
console.log(typeof varVariable); // "undefined"
var varVariable = 10;

// Con let - TDZ
// console.log(typeof letVariable); // ❌ ReferenceError
let letVariable = 20;

// Variable nunca declarada
console.log(typeof nuncaDeclarada); // "undefined" (no error)</code></pre>
                
                <h3>TDZ en Parámetros por Defecto:</h3>
                <pre><code class="language-javascript">// Ejemplo complejo de TDZ
function ejemplo(a = b, b = 2) {
    // ❌ Error: b está en TDZ cuando se evalúa a
    console.log(a, b);
}

// ejemplo(undefined, 3); // ReferenceError

// Solución
function ejemplo2(b = 2, a = b) {
    // ✅ Funciona: b ya está declarada cuando se evalúa a
    console.log(a, b);
}

ejemplo2(); // 2, 2</code></pre>
                
                <h3>¿Por qué existe la TDZ?</h3>
                <ul>
                    <li><strong>Prevenir errores:</strong> Detecta errores de usar variables antes de declararlas</li>
                    <li><strong>Código más claro:</strong> Fuerza a declarar variables en orden lógico</li>
                    <li><strong>Consistencia:</strong> Hace que const sea realmente constante desde su inicio</li>
                </ul>
                
                <h3>Ejemplo Práctico:</h3>
                <pre><code class="language-javascript">// Problema que TDZ previene
let x = 10;

function prueba() {
    // Sin TDZ, esto mostraría 10 (la x global)
    // Con TDZ, esto da error (la x local está en TDZ)
    // console.log(x); // ❌ ReferenceError
    
    let x = 20; // x local
    console.log(x); // 20
}

prueba();</code></pre>
                
                <h3>⚠️ Buenas Prácticas:</h3>
                <ul>
                    <li>Declara variables al principio de su scope</li>
                    <li>No intentes usar variables antes de declararlas</li>
                    <li>El linter te avisará de errores de TDZ</li>
                </ul>
                
                <h3>Resumen:</h3>
                <table style="width: 100%; border-collapse: collapse; margin: 1rem 0;">
                    <tr style="background: #f8f9fa;">
                        <th style="padding: 0.5rem; border: 1px solid #dee2e6;"></th>
                        <th style="padding: 0.5rem; border: 1px solid #dee2e6;">var</th>
                        <th style="padding: 0.5rem; border: 1px solid #dee2e6;">let/const</th>
                    </tr>
                    <tr>
                        <td style="padding: 0.5rem; border: 1px solid #dee2e6;"><strong>TDZ</strong></td>
                        <td style="padding: 0.5rem; border: 1px solid #dee2e6;">❌ No</td>
                        <td style="padding: 0.5rem; border: 1px solid #dee2e6;">✅ Sí</td>
                    </tr>
                    <tr style="background: #f8f9fa;">
                        <td style="padding: 0.5rem; border: 1px solid #dee2e6;"><strong>Valor antes de declaración</strong></td>
                        <td style="padding: 0.5rem; border: 1px solid #dee2e6;">undefined</td>
                        <td style="padding: 0.5rem; border: 1px solid #dee2e6;">ReferenceError</td>
                    </tr>
                    <tr>
                        <td style="padding: 0.5rem; border: 1px solid #dee2e6;"><strong>typeof antes de declaración</strong></td>
                        <td style="padding: 0.5rem; border: 1px solid #dee2e6;">"undefined"</td>
                        <td style="padding: 0.5rem; border: 1px solid #dee2e6;">ReferenceError</td>
                    </tr>
                </table>
            </div>
        </div>
    </div>

    <div id="scope-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2><i class="fas fa-layer-group"></i> Scope: Bloque vs Función</h2>
                <div class="modal-actions">
                    <button class="audio-btn" onclick="readModalContent('scope-modal')" title="Leer contenido">
                        <i class="fas fa-volume-up"></i>
                    </button>
                    <span class="close" onclick="closeModal('scope-modal')">&times;</span>
                </div>
            </div>
            <div class="modal-body">
                <h3>¿Qué es el Scope?</h3>
                <p>El <strong>scope</strong> (ámbito) es la región del código donde una variable es accesible. JavaScript tiene principalmente dos tipos de scope para variables: <strong>function scope</strong> y <strong>block scope</strong>.</p>
                
                <h3>Function Scope (var):</h3>
                <p><code>var</code> tiene <strong>function scope</strong>: la variable existe en toda la función donde se declara.</p>
                <pre><code class="language-javascript">function ejemplo() {
    if (true) {
        var x = 10; // Declarada en el if
    }
    console.log(x); // ✅ 10 - Accesible fuera del if
}

ejemplo();

// Fuera de la función
// console.log(x); // ❌ Error: x no existe fuera de la función</code></pre>
                
                <h3>Block Scope (let y const):</h3>
                <p><code>let</code> y <code>const</code> tienen <strong>block scope</strong>: la variable solo existe en el bloque <code>{...}</code> donde se declara.</p>
                <pre><code class="language-javascript">function ejemplo() {
    if (true) {
        let y = 20; // Declarada en el bloque if
        const z = 30;
        console.log(y, z); // ✅ 20, 30
    }
    // console.log(y); // ❌ Error: y no existe fuera del if
    // console.log(z); // ❌ Error: z no existe fuera del if
}

ejemplo();</code></pre>
                
                <h3>Comparación Visual:</h3>
                <pre><code class="language-javascript">function comparacion() {
    console.log("=== Function Scope (var) ===");
    if (true) {
        var funcionScope = "Accesible en toda la función";
    }
    console.log(funcionScope); // ✅ Funciona
    
    console.log("=== Block Scope (let/const) ===");
    if (true) {
        let bloqueScope = "Solo en este bloque";
    }
    // console.log(bloqueScope); // ❌ Error
}</code></pre>
                
                <h3>Scope en Loops:</h3>
                <pre><code class="language-javascript">// Con var - function scope
for (var i = 0; i < 3; i++) {
    setTimeout(() => console.log("var:", i), 1000);
}
// Imprime: var: 3, var: 3, var: 3
// (i es la misma variable en todos los callbacks)

// Con let - block scope
for (let j = 0; j < 3; j++) {
    setTimeout(() => console.log("let:", j), 1000);
}
// Imprime: let: 0, let: 1, let: 2
// (cada iteración tiene su propia j)</code></pre>
                
                <h3>Bloques Anidados:</h3>
                <pre><code class="language-javascript">function anidados() {
    let exterior = "Outer";
    
    if (true) {
        let medio = "Middle";
        console.log(exterior); // ✅ Accesible
        
        {
            let interior = "Inner";
            console.log(exterior); // ✅ Accesible
            console.log(medio); // ✅ Accesible
            console.log(interior); // ✅ Accesible
        }
        
        // console.log(interior); // ❌ No accesible
    }
    
    // console.log(medio); // ❌ No accesible
}</code></pre>
                
                <h3>Global Scope:</h3>
                <pre><code class="language-javascript">// Scope global
var globalVar = "Global var"; // Propiedad de window
let globalLet = "Global let"; // NO es propiedad de window
const globalConst = "Global const"; // NO es propiedad de window

console.log(window.globalVar); // "Global var"
console.log(window.globalLet); // undefined
console.log(window.globalConst); // undefined

// Todos son accesibles globalmente
console.log(globalVar, globalLet, globalConst);</code></pre>
                
                <h3>Ejemplo Práctico - Problema Clásico:</h3>
                <pre><code class="language-javascript">// ❌ Problema con var
var botones = [];
for (var i = 0; i < 3; i++) {
    botones.push(function() {
        console.log("Botón", i);
    });
}

botones.forEach(boton => boton());
// Imprime: Botón 3, Botón 3, Botón 3

// ✅ Solución con let
var botones2 = [];
for (let i = 0; i < 3; i++) {
    botones2.push(function() {
        console.log("Botón", i);
    });
}

botones2.forEach(boton => boton());
// Imprime: Botón 0, Botón 1, Botón 2</code></pre>
                
                <h3>Ámbitos de JavaScript:</h3>
                <ul>
                    <li><strong>Global Scope:</strong> Variables accesibles en todo el programa</li>
                    <li><strong>Function Scope:</strong> Variables accesibles en toda la función (var)</li>
                    <li><strong>Block Scope:</strong> Variables accesibles solo en el bloque (let/const)</li>
                    <li><strong>Module Scope:</strong> Variables accesibles solo en el módulo ES6</li>
                </ul>
                
                <h3>Resumen Comparativo:</h3>
                <table style="width: 100%; border-collapse: collapse; margin: 1rem 0;">
                    <tr style="background: #f8f9fa;">
                        <th style="padding: 0.5rem; border: 1px solid #dee2e6;">Declaración</th>
                        <th style="padding: 0.5rem; border: 1px solid #dee2e6;">Scope</th>
                        <th style="padding: 0.5rem; border: 1px solid #dee2e6;">Disponible en bloques</th>
                    </tr>
                    <tr>
                        <td style="padding: 0.5rem; border: 1px solid #dee2e6;"><code>var</code></td>
                        <td style="padding: 0.5rem; border: 1px solid #dee2e6;">Function</td>
                        <td style="padding: 0.5rem; border: 1px solid #dee2e6;">✅ Sí (traspasa bloques)</td>
                    </tr>
                    <tr style="background: #f8f9fa;">
                        <td style="padding: 0.5rem; border: 1px solid #dee2e6;"><code>let</code></td>
                        <td style="padding: 0.5rem; border: 1px solid #dee2e6;">Block</td>
                        <td style="padding: 0.5rem; border: 1px solid #dee2e6;">❌ No (limitado al bloque)</td>
                    </tr>
                    <tr>
                        <td style="padding: 0.5rem; border: 1px solid #dee2e6;"><code>const</code></td>
                        <td style="padding: 0.5rem; border: 1px solid #dee2e6;">Block</td>
                        <td style="padding: 0.5rem; border: 1px solid #dee2e6;">❌ No (limitado al bloque)</td>
                    </tr>
                </table>
                
                <h3>⚠️ Buenas Prácticas:</h3>
                <ul>
                    <li>Usa <code>let</code> y <code>const</code> para tener control preciso del scope</li>
                    <li>Declara variables en el scope más pequeño posible</li>
                    <li>Evita contaminar el scope global</li>
                    <li>Usa bloques <code>{...}</code> para crear scopes privados cuando sea necesario</li>
                </ul>
            </div>
        </div>
    </div>

    <!-- Modales Explicativos - Lección 2: Arrow Functions -->
    <div id="arrow-syntax-noparams-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2><i class="fas fa-arrow-right"></i> Arrow Functions Sin Parámetros</h2>
                <div class="modal-actions">
                    <button class="audio-btn" onclick="readModalContent('arrow-syntax-noparams-modal')" title="Leer contenido">
                        <i class="fas fa-volume-up"></i>
                    </button>
                    <span class="close" onclick="closeModal('arrow-syntax-noparams-modal')">&times;</span>
                </div>
            </div>
            <div class="modal-body">
                <h3>Sintaxis:</h3>
                <pre><code class="language-javascript">() => {
    // Código aquí
}</code></pre>
                
                <h3>Ejemplo Básico:</h3>
                <pre><code class="language-javascript">// Función tradicional
function saludar() {
    console.log("¡Hola!");
}

// Arrow function equivalente
const saludar = () => {
    console.log("¡Hola!");
};

// Arrow function con return implícito
const saludar = () => console.log("¡Hola!");</code></pre>
                
                <h3>Casos de Uso Comunes:</h3>
                <pre><code class="language-javascript">// Callbacks sin parámetros
setTimeout(() => {
    console.log("Ejecutado después de 1 segundo");
}, 1000);

// Event listeners
boton.addEventListener('click', () => {
    console.log("Botón clickeado");
});

// Métodos de arrays
let numeros = [1, 2, 3];
numeros.forEach(() => {
    console.log("Iteración");
});</code></pre>
                
                <h3>Comparación:</h3>
                <table style="width: 100%; border-collapse: collapse; margin: 1rem 0;">
                    <tr style="background: #f8f9fa;">
                        <th style="padding: 0.5rem; border: 1px solid #dee2e6;">Tradicional</th>
                        <th style="padding: 0.5rem; border: 1px solid #dee2e6;">Arrow Function</th>
                    </tr>
                    <tr>
                        <td style="padding: 0.5rem; border: 1px solid #dee2e6;"><code>function() { }</code></td>
                        <td style="padding: 0.5rem; border: 1px solid #dee2e6;"><code>() => { }</code></td>
                    </tr>
                    <tr style="background: #f8f9fa;">
                        <td style="padding: 0.5rem; border: 1px solid #dee2e6;">Más verboso</td>
                        <td style="padding: 0.5rem; border: 1px solid #dee2e6;">Más conciso</td>
                    </tr>
                </table>
                
                <h3>⚠️ Importante:</h3>
                <p>Los paréntesis <code>()</code> son obligatorios cuando no hay parámetros en arrow functions.</p>
            </div>
        </div>
    </div>

    <div id="arrow-syntax-oneparam-modal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('arrow-syntax-oneparam-modal')">&times;</span>
            <h2><i class="fas fa-arrow-right"></i> Arrow Functions con Un Parámetro</h2>
            <div class="modal-body">
                <h3>Sintaxis:</h3>
                <pre><code class="language-javascript">// Con paréntesis (opcional)
(x) => {
    return x * 2;
}

// Sin paréntesis (recomendado)
x => {
    return x * 2;
}

// Return implícito (más conciso)
x => x * 2</code></pre>
                
                <h3>Ejemplos Prácticos:</h3>
                <pre><code class="language-javascript">// Función tradicional
function duplicar(x) {
    return x * 2;
}

// Arrow function con return explícito
const duplicar = (x) => {
    return x * 2;
};

// Arrow function con return implícito
const duplicar = x => x * 2;

// Uso en arrays
let numeros = [1, 2, 3, 4, 5];
let dobles = numeros.map(x => x * 2);
console.log(dobles); // [2, 4, 6, 8, 10]</code></pre>
                
                <h3>Casos de Uso Comunes:</h3>
                <pre><code class="language-javascript">// Métodos de arrays
let palabras = ["hola", "mundo", "javascript"];
let mayusculas = palabras.map(palabra => palabra.toUpperCase());

// Filtros
let numeros = [1, 2, 3, 4, 5, 6];
let pares = numeros.filter(n => n % 2 === 0);

// Event handlers
elemento.addEventListener('click', evento => {
    console.log("Click en:", evento.target);
});

// Promesas
fetch('/api/data')
    .then(response => response.json())
    .then(data => console.log(data));</code></pre>
                
                <h3>Ventajas del Return Implícito:</h3>
                <ul>
                    <li><strong>Más conciso:</strong> Menos código para escribir</li>
                    <li><strong>Más legible:</strong> Se ve más limpio</li>
                    <li><strong>Funcional:</strong> Ideal para transformaciones de datos</li>
                </ul>
                
                <h3>⚠️ Cuándo NO usar Return Implícito:</h3>
                <pre><code class="language-javascript">// ❌ No usar cuando necesitas múltiples líneas
let procesar = x => {
    let resultado = x * 2;
    console.log("Procesando:", x);
    return resultado; // Necesitas return explícito
};

// ✅ Mejor así
let procesar = x => {
    let resultado = x * 2;
    console.log("Procesando:", x);
    return resultado;
};</code></pre>
                
                <h3>Reglas de Paréntesis:</h3>
                <ul>
                    <li><strong>Un parámetro:</strong> Paréntesis opcionales</li>
                    <li><strong>Sin parámetros:</strong> Paréntesis obligatorios</li>
                    <li><strong>Múltiples parámetros:</strong> Paréntesis obligatorios</li>
                </ul>
            </div>
        </div>
    </div>

    <div id="arrow-syntax-multiparams-modal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('arrow-syntax-multiparams-modal')">&times;</span>
            <h2><i class="fas fa-arrow-right"></i> Arrow Functions con Múltiples Parámetros</h2>
            <div class="modal-body">
                <h3>Sintaxis:</h3>
                <pre><code class="language-javascript">// Con return explícito
(a, b) => {
    return a + b;
}

// Con return implícito
(a, b) => a + b

// Con más parámetros
(a, b, c) => a + b + c</code></pre>
                
                <h3>Ejemplos Prácticos:</h3>
                <pre><code class="language-javascript">// Función tradicional
function sumar(a, b) {
    return a + b;
}

// Arrow function
const sumar = (a, b) => a + b;

// Uso en reduce
let numeros = [1, 2, 3, 4, 5];
let suma = numeros.reduce((acumulador, numero) => acumulador + numero, 0);
console.log(suma); // 15</code></pre>
                
                <h3>Casos de Uso Avanzados:</h3>
                <pre><code class="language-javascript">// Sort con arrow function
let personas = [
    { nombre: "Ana", edad: 25 },
    { nombre: "Carlos", edad: 30 },
    { nombre: "María", edad: 22 }
];

// Ordenar por edad
personas.sort((a, b) => a.edad - b.edad);

// Map con índice
let frutas = ["manzana", "banana", "naranja"];
let conIndice = frutas.map((fruta, indice) => `${indice}: ${fruta}`);

// Filter con múltiples condiciones
let productos = [
    { nombre: "Laptop", precio: 1000, categoria: "electrónica" },
    { nombre: "Mouse", precio: 25, categoria: "electrónica" },
    { nombre: "Camisa", precio: 30, categoria: "ropa" }
];

let electronicosBaratos = productos.filter((producto, indice) => 
    producto.categoria === "electrónica" && producto.precio < 100
);</code></pre>
                
                <h3>Destructuring en Parámetros:</h3>
                <pre><code class="language-javascript">// Con objetos
let usuarios = [
    { nombre: "Ana", edad: 25 },
    { nombre: "Carlos", edad: 30 }
];

let nombres = usuarios.map(({ nombre }) => nombre);
console.log(nombres); // ["Ana", "Carlos"]

// Con arrays
let coordenadas = [[1, 2], [3, 4], [5, 6]];
let sumas = coordenadas.map(([x, y]) => x + y);
console.log(sumas); // [3, 7, 11]</code></pre>
                
                <h3>Parámetros por Defecto:</h3>
                <pre><code class="language-javascript">// Con valores por defecto
const saludar = (nombre = "Usuario", saludo = "Hola") => 
    `${saludo}, ${nombre}!`;

console.log(saludar()); // "Hola, Usuario!"
console.log(saludar("Ana")); // "Hola, Ana!"
console.log(saludar("Carlos", "Buenos días")); // "Buenos días, Carlos!"</code></pre>
                
                <h3>Rest Parameters:</h3>
                <pre><code class="language-javascript">// Con rest parameters
const sumarTodo = (primero, segundo, ...resto) => {
    let suma = primero + segundo;
    return resto.reduce((acc, num) => acc + num, suma);
};

console.log(sumarTodo(1, 2, 3, 4, 5)); // 15</code></pre>
                
                <h3>⚠️ Reglas Importantes:</h3>
                <ul>
                    <li><strong>Paréntesis obligatorios:</strong> Con múltiples parámetros siempre usa <code>()</code></li>
                    <li><strong>Orden de parámetros:</strong> Mantén el mismo orden que la función original</li>
                    <li><strong>Nombres descriptivos:</strong> Usa nombres que indiquen qué hace cada parámetro</li>
                </ul>
            </div>
        </div>
    </div>

    <div id="arrow-this-modal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('arrow-this-modal')">&times;</span>
            <h2><i class="fas fa-question"></i> this en Arrow Functions</h2>
            <div class="modal-body">
                <h3>🤔 ¿Qué es "this"? - Versión Simple</h3>
                <p><code>this</code> es como decir <strong>"yo"</strong> o <strong>"este objeto"</strong> en tu código.</p>
                <p><strong>La diferencia clave:</strong></p>
                <ul>
                    <li><strong>Función normal:</strong> "this" cambia dependiendo de <em>quién</em> ejecuta la función</li>
                    <li><strong>Arrow function:</strong> "this" se queda con el valor de <em>donde se escribió</em> la función</li>
                </ul>
                <p>Es como la diferencia entre:</p>
                <ul>
                    <li><strong>Función normal:</strong> "Yo" (depende de quién hable)</li>
                    <li><strong>Arrow function:</strong> "Juan" (siempre es Juan, no importa quién lo diga)</li>
                </ul>
                
                <h3>📋 Las 4 Reglas de "this" (Repaso Rápido)</h3>
                <p>JavaScript decide qué es <code>this</code> con estas reglas:</p>
                <ol>
                    <li><strong>Método de objeto:</strong> <code>objeto.metodo()</code> → this = objeto</li>
                    <li><strong>Función suelta:</strong> <code>funcion()</code> → this = window/undefined</li>
                    <li><strong>Constructor:</strong> <code>new Funcion()</code> → this = nuevo objeto</li>
                    <li><strong>Forzado:</strong> <code>.call()</code>/<code>.bind()</code> → this = lo que tú decidas</li>
                </ol>
                <p><strong>Pero las arrow functions ignoran estas reglas.</strong> Siempre toman el <code>this</code> de donde fueron escritas (no de donde se ejecutan).</p>
                
                <h3>🔍 Diferencia Clave - Explicación Visual:</h3>
                <p>Imagina dos personas dando un mensaje:</p>
                <pre><code class="language-javascript">let objeto = {
    nombre: "MiObjeto",
    
    // Función normal - "this" cambia según quién ejecuta
    metodoNormal: function() {
        console.log("Normal:", this.nombre); // "MiObjeto"
        // AQUÍ: objeto.metodoNormal() → this = objeto ✅
        
        setTimeout(function() {
            console.log("Normal en setTimeout:", this.nombre); // undefined
            // AQUÍ: setTimeout ejecuta → this = window ❌
            // ¡La función "olvida" que venía de "objeto"!
        }, 1000);
    },
    
    // Arrow function - "this" se queda fijo
    metodoArrow: function() {
        console.log("Arrow:", this.nombre); // "MiObjeto"
        // AQUÍ: objeto.metodoArrow() → this = objeto ✅
        
        setTimeout(() => {
            console.log("Arrow en setTimeout:", this.nombre); // "MiObjeto"
            // AQUÍ: La arrow function "recuerda" que this = objeto ✅
            // No importa que setTimeout la ejecute
        }, 1000);
    }
};

objeto.metodoNormal(); // "MiObjeto" → undefined
objeto.metodoArrow();  // "MiObjeto" → "MiObjeto"</code></pre>
                
                <p><strong>¿Por qué pasa esto?</strong></p>
                <ul>
                    <li><strong>Función normal:</strong> Cuando setTimeout ejecuta la función, "this" se refiere a setTimeout (o window), no a "objeto"</li>
                    <li><strong>Arrow function:</strong> Toma prestado el "this" del lugar donde fue escrita (dentro de metodoArrow, donde this = objeto)</li>
                </ul>
                
                <h3>Ejemplo Práctico - Event Listeners:</h3>
                <pre><code class="language-javascript">class Contador {
    constructor() {
        this.contador = 0;
        this.boton = document.getElementById('boton');
        
        // ❌ Problema con función normal
        this.boton.addEventListener('click', function() {
            this.contador++; // ❌ this es el botón, no Contador
            console.log(this.contador); // undefined
        });
        
        // ✅ Solución con arrow function
        this.boton.addEventListener('click', () => {
            this.contador++; // ✅ this es Contador
            console.log(this.contador); // Funciona correctamente
        });
    }
}</code></pre>
                
                <h3>⚠️ Arrow Functions NO pueden cambiar "this":</h3>
                <p><strong>Problema:</strong> Las arrow functions "congelan" el valor de <code>this</code>. No se puede cambiar después.</p>
                <pre><code class="language-javascript">let persona = {
    nombre: "Ana",
    saludar: () => {
        // ❌ Aquí "this" NO es "persona"
        // Es el "this" de FUERA del objeto (window)
        console.log(this.nombre); // undefined
    }
};

persona.saludar(); // undefined (no "Ana")

// Incluso si intentas forzarlo:
persona.saludar.call({ nombre: "Carlos" }); // Sigue siendo undefined
// ¡No funciona! La arrow function ignora .call()</code></pre>
                
                <p><strong>¿Por qué?</strong> La arrow function tomó el <code>this</code> de donde fue escrita (fuera del objeto, en el scope global). Y ese valor no se puede cambiar.</p>
                
                <h3>Cuándo NO usar Arrow Functions:</h3>
                <pre><code class="language-javascript">// ❌ NO para métodos de objeto
let objeto = {
    valor: 42,
    metodo: () => {
        console.log(this.valor); // undefined
    }
};

// ✅ Mejor usar función normal
let objeto2 = {
    valor: 42,
    metodo: function() {
        console.log(this.valor); // 42
    }
};

// ❌ NO para constructores
let Constructor = () => {
    this.propiedad = "valor";
};
// new Constructor(); // Error!</code></pre>
                
                <h3>Cuándo SÍ usar Arrow Functions:</h3>
                <pre><code class="language-javascript">// ✅ Para callbacks que necesitan mantener this
class Timer {
    constructor() {
        this.segundos = 0;
    }
    
    iniciar() {
        setInterval(() => {
            this.segundos++;
            console.log(this.segundos);
        }, 1000);
    }
}

// ✅ Para métodos de arrays
let numeros = [1, 2, 3, 4, 5];
let dobles = numeros.map(n => n * 2);

// ✅ Para funciones que no necesitan this
let sumar = (a, b) => a + b;</code></pre>
                
                <h3>Resumen:</h3>
                <table style="width: 100%; border-collapse: collapse; margin: 1rem 0;">
                    <tr style="background: #f8f9fa;">
                        <th style="padding: 0.5rem; border: 1px solid #dee2e6;">Aspecto</th>
                        <th style="padding: 0.5rem; border: 1px solid #dee2e6;">Función Normal</th>
                        <th style="padding: 0.5rem; border: 1px solid #dee2e6;">Arrow Function</th>
                    </tr>
                    <tr>
                        <td style="padding: 0.5rem; border: 1px solid #dee2e6;"><strong>this</strong></td>
                        <td style="padding: 0.5rem; border: 1px solid #dee2e6;">Cambia según cómo se llama</td>
                        <td style="padding: 0.5rem; border: 1px solid #dee2e6;">Hereda del scope padre</td>
                    </tr>
                    <tr style="background: #f8f9fa;">
                        <td style="padding: 0.5rem; border: 1px solid #dee2e6;"><strong>call/apply/bind</strong></td>
                        <td style="padding: 0.5rem; border: 1px solid #dee2e6;">✅ Funciona</td>
                        <td style="padding: 0.5rem; border: 1px solid #dee2e6;">❌ No funciona</td>
                    </tr>
                    <tr>
                        <td style="padding: 0.5rem; border: 1px solid #dee2e6;"><strong>constructores</strong></td>
                        <td style="padding: 0.5rem; border: 1px solid #dee2e6;">✅ Pueden ser constructores</td>
                        <td style="padding: 0.5rem; border: 1px solid #dee2e6;">❌ No pueden ser constructores</td>
                    </tr>
                </table>
                
                <h3>📝 Regla Práctica - Guía Simple</h3>
                <div style="background: #f8f9fa; padding: 1.5rem; border-left: 4px solid #667eea; margin: 1rem 0;">
                    <h4>¿Cuándo usar cada tipo de función?</h4>
                    
                    <p><strong>✅ Usa FUNCTION para:</strong></p>
                    <ul>
                        <li>Métodos de objetos</li>
                        <li>Métodos de clases</li>
                        <li>Constructores</li>
                        <li>Cuando necesites usar <code>arguments</code></li>
                    </ul>
                    <pre><code class="language-javascript">let objeto = {
    metodo: function() { /* usa "this" */ }
};</code></pre>
                    
                    <p><strong>✅ Usa ARROW FUNCTION para:</strong></p>
                    <ul>
                        <li>Callbacks (setTimeout, setInterval, addEventListener)</li>
                        <li>Métodos de arrays (map, filter, forEach)</li>
                        <li>Funciones dentro de otras funciones</li>
                        <li>Cuando NO uses <code>this</code></li>
                    </ul>
                    <pre><code class="language-javascript">setTimeout(() => { /* código */ }, 1000);
array.map(item => item * 2);</code></pre>
                    
                    <p><strong>⚠️ Si no estás seguro:</strong> Usa arrow function. Es más seguro.</p>
                </div>
                
                <h3>🎯 Diagrama de Decisión</h3>
                <pre style="background: #f8f9fa; padding: 1.5rem; border-radius: 8px; font-family: monospace;">
<strong>¿Qué tipo de función usar?</strong>

1. ¿Es un método de objeto o clase?
   ├─ SÍ → Usa <strong>function</strong>
   │        let obj = { metodo: function() {} }
   │
   └─ NO → ¿Vas a usar "this"?
       ├─ NO → Usa <strong>arrow function</strong> (más corta)
       │        const suma = (a, b) => a + b
       │
       └─ SÍ → ¿Es un callback?
           ├─ SÍ → Usa <strong>arrow function</strong>
           │        setTimeout(() => {}, 1000)
           │
           └─ NO → Usa <strong>function</strong> (para control total)
                    function miFuncion() { ... }
</pre>
                
                <h3>🐛 Cómo Debuggear "this"</h3>
                <p>Cuando algo no funciona, agrega esto:</p>
                <pre><code class="language-javascript">function miFuncion() {
    console.log("¿Qué es this?", this);
    // Verás exactamente qué es "this"
}

let objeto = {
    metodo: () => {
        console.log("¿Qué es this?", this);
        // Esto te ayudará a encontrar el problema
    }
};</code></pre>
                
                <h3>⚠️ Regla de Oro:</h3>
                <p><strong>Principio simple:</strong> Las arrow functions toman prestado el <code>this</code> de donde fueron escritas. Las funciones normales crean su propio <code>this</code> cada vez que se ejecutan.</p>
                <p><strong>Para principiantes:</strong> Usa arrow functions en callbacks. Usa funciones normales para métodos de objetos. Así evitarás el 90% de los problemas.</p>
                
                <h3>📚 Resumen Rápido</h3>
                <table style="width: 100%; border-collapse: collapse; margin: 1rem 0;">
                    <tr style="background: #667eea; color: white;">
                        <th style="padding: 0.75rem; border: 1px solid #dee2e6;">Característica</th>
                        <th style="padding: 0.75rem; border: 1px solid #dee2e6;">function</th>
                        <th style="padding: 0.75rem; border: 1px solid #dee2e6;">Arrow Function</th>
                    </tr>
                    <tr>
                        <td style="padding: 0.75rem; border: 1px solid #dee2e6;"><strong>"this"</strong></td>
                        <td style="padding: 0.75rem; border: 1px solid #dee2e6;">Cambia según quién ejecuta</td>
                        <td style="padding: 0.75rem; border: 1px solid #dee2e6;">Fijo (donde se escribió)</td>
                    </tr>
                    <tr style="background: #f8f9fa;">
                        <td style="padding: 0.75rem; border: 1px solid #dee2e6;"><strong>Uso típico</strong></td>
                        <td style="padding: 0.75rem; border: 1px solid #dee2e6;">Métodos de objetos</td>
                        <td style="padding: 0.75rem; border: 1px solid #dee2e6;">Callbacks</td>
                    </tr>
                    <tr>
                        <td style="padding: 0.75rem; border: 1px solid #dee2e6;"><strong>call/bind</strong></td>
                        <td style="padding: 0.75rem; border: 1px solid #dee2e6;">✅ Funciona</td>
                        <td style="padding: 0.75rem; border: 1px solid #dee2e6;">❌ Se ignora</td>
                    </tr>
                    <tr style="background: #f8f9fa;">
                        <td style="padding: 0.75rem; border: 1px solid #dee2e6;"><strong>Constructor</strong></td>
                        <td style="padding: 0.75rem; border: 1px solid #dee2e6;">✅ Sí (new)</td>
                        <td style="padding: 0.75rem; border: 1px solid #dee2e6;">❌ No</td>
                    </tr>
                    <tr>
                        <td style="padding: 0.75rem; border: 1px solid #dee2e6;"><strong>arguments</strong></td>
                        <td style="padding: 0.75rem; border: 1px solid #dee2e6;">✅ Tiene</td>
                        <td style="padding: 0.75rem; border: 1px solid #dee2e6;">❌ No tiene</td>
                    </tr>
                </table>
            </div>
        </div>
    </div>

    <div id="arrow-arguments-modal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('arrow-arguments-modal')">&times;</span>
            <h2><i class="fas fa-list"></i> arguments en Arrow Functions</h2>
            <div class="modal-body">
                <h3>¿Qué es arguments?</h3>
                <p><code>arguments</code> es un objeto especial disponible en funciones normales que contiene todos los argumentos pasados a la función, incluso si no están declarados como parámetros.</p>
                
                <h3>Diferencia Clave:</h3>
                <pre><code class="language-javascript">// Función normal - tiene arguments
function sumar() {
    console.log("arguments:", arguments);
    let suma = 0;
    for (let i = 0; i < arguments.length; i++) {
        suma += arguments[i];
    }
    return suma;
}

console.log(sumar(1, 2, 3, 4)); // 10

// Arrow function - NO tiene arguments
const sumarArrow = () => {
    console.log("arguments:", arguments); // ❌ Error: arguments is not defined
};

// sumarArrow(1, 2, 3, 4); // Error!</code></pre>
                
                <h3>Alternativas Modernas:</h3>
                <pre><code class="language-javascript">// ✅ Usar rest parameters en lugar de arguments
const sumar = (...numeros) => {
    console.log("numeros:", numeros); // [1, 2, 3, 4]
    return numeros.reduce((acc, num) => acc + num, 0);
};

console.log(sumar(1, 2, 3, 4)); // 10

// ✅ Con parámetros normales + rest
const procesar = (primer, segundo, ...resto) => {
    console.log("Primer:", primer);
    console.log("Segundo:", segundo);
    console.log("Resto:", resto);
};

procesar("A", "B", "C", "D", "E");
// Primer: A
// Segundo: B
// Resto: ["C", "D", "E"]</code></pre>
                
                <h3>Ventajas de Rest Parameters:</h3>
                <ul>
                    <li><strong>Array real:</strong> <code>...resto</code> es un array verdadero, no un objeto</li>
                    <li><strong>Métodos de array:</strong> Puedes usar map, filter, reduce, etc.</li>
                    <li><strong>Más claro:</strong> Es explícito qué parámetros esperas</li>
                    <li><strong>Mejor rendimiento:</strong> No se crea el objeto arguments</li>
                </ul>
                
                <h3>Ejemplo Práctico - Función de Logging:</h3>
                <pre><code class="language-javascript">// Función tradicional con arguments
function log() {
    let mensaje = Array.from(arguments).join(' ');
    console.log(mensaje);
}

// Arrow function con rest parameters
const logArrow = (...args) => {
    let mensaje = args.join(' ');
    console.log(mensaje);
};

// Ambas funcionan igual
log("Hola", "mundo", "desde", "JavaScript");
logArrow("Hola", "mundo", "desde", "Arrow Function");</code></pre>
                
                <h3>Ejemplo Avanzado - Función Flexible:</h3>
                <pre><code class="language-javascript">// Función que puede tomar diferentes tipos de parámetros
const crearUsuario = (nombre, ...opciones) => {
    let usuario = {
        nombre: nombre,
        activo: true,
        rol: "usuario"
    };
    
    // Procesar opciones adicionales
    opciones.forEach(opcion => {
        if (typeof opcion === 'object') {
            Object.assign(usuario, opcion);
        }
    });
    
    return usuario;
};

// Uso
let usuario1 = crearUsuario("Ana");
let usuario2 = crearUsuario("Carlos", { rol: "admin" });
let usuario3 = crearUsuario("María", { rol: "editor" }, { activo: false });

console.log(usuario1); // { nombre: "Ana", activo: true, rol: "usuario" }
console.log(usuario2); // { nombre: "Carlos", activo: true, rol: "admin" }
console.log(usuario3); // { nombre: "María", activo: false, rol: "editor" }</code></pre>
                
                <h3>Migración de arguments a Rest Parameters:</h3>
                <pre><code class="language-javascript">// ❌ Código antiguo con arguments
function procesarDatos() {
    let datos = Array.from(arguments);
    return datos.map(d => d * 2);
}

// ✅ Código moderno con rest parameters
const procesarDatos = (...datos) => {
    return datos.map(d => d * 2);
};

// Ambas funcionan igual
console.log(procesarDatos(1, 2, 3, 4)); // [2, 4, 6, 8]</code></pre>
                
                <h3>⚠️ Limitaciones de Arrow Functions:</h3>
                <ul>
                    <li><strong>No tienen arguments:</strong> Debes usar rest parameters</li>
                    <li><strong>No tienen super:</strong> No pueden ser métodos de clase</li>
                    <li><strong>No tienen new.target:</strong> No pueden detectar si fueron llamadas con new</li>
                </ul>
                
                <h3>Resumen:</h3>
                <table style="width: 100%; border-collapse: collapse; margin: 1rem 0;">
                    <tr style="background: #f8f9fa;">
                        <th style="padding: 0.5rem; border: 1px solid #dee2e6;">Aspecto</th>
                        <th style="padding: 0.5rem; border: 1px solid #dee2e6;">Función Normal</th>
                        <th style="padding: 0.5rem; border: 1px solid #dee2e6;">Arrow Function</th>
                    </tr>
                    <tr>
                        <td style="padding: 0.5rem; border: 1px solid #dee2e6;"><strong>arguments</strong></td>
                        <td style="padding: 0.5rem; border: 1px solid #dee2e6;">✅ Disponible</td>
                        <td style="padding: 0.5rem; border: 1px solid #dee2e6;">❌ No disponible</td>
                    </tr>
                    <tr style="background: #f8f9fa;">
                        <td style="padding: 0.5rem; border: 1px solid #dee2e6;"><strong>rest parameters</strong></td>
                        <td style="padding: 0.5rem; border: 1px solid #dee2e6;">✅ Disponible</td>
                        <td style="padding: 0.5rem; border: 1px solid #dee2e6;">✅ Disponible</td>
                    </tr>
                    <tr>
                        <td style="padding: 0.5rem; border: 1px solid #dee2e6;"><strong>tipo de arguments</strong></td>
                        <td style="padding: 0.5rem; border: 1px solid #dee2e6;">Objeto</td>
                        <td style="padding: 0.5rem; border: 1px solid #dee2e6;">Array (rest)</td>
                    </tr>
                </table>
                
                <h3>💡 Recomendación:</h3>
                <p>En lugar de usar <code>arguments</code>, usa <strong>rest parameters</strong> (<code>...args</code>). Es más moderno, más claro y funciona tanto en funciones normales como en arrow functions.</p>
            </div>
        </div>
    </div>

    <div id="arrow-constructor-modal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('arrow-constructor-modal')">&times;</span>
            <h2><i class="fas fa-hammer"></i> Arrow Functions como Constructores</h2>
            <div class="modal-body">
                <h3>¿Qué es un Constructor?</h3>
                <p>Un <strong>constructor</strong> es una función que se usa con la palabra clave <code>new</code> para crear instancias de objetos. Las arrow functions NO pueden ser constructores.</p>
                
                <h3>Diferencia Clave:</h3>
                <pre><code class="language-javascript">// ✅ Función normal como constructor
function Persona(nombre, edad) {
    this.nombre = nombre;
    this.edad = edad;
    
    this.saludar = function() {
        console.log(`Hola, soy ${this.nombre}`);
    };
}

let persona1 = new Persona("Ana", 25);
persona1.saludar(); // "Hola, soy Ana"

// ❌ Arrow function NO puede ser constructor
const PersonaArrow = (nombre, edad) => {
    this.nombre = nombre; // ❌ Error: this no está definido
    this.edad = edad;
};

// let persona2 = new PersonaArrow("Carlos", 30); // ❌ Error!</code></pre>
                
                <h3>¿Por qué Arrow Functions NO pueden ser Constructores?</h3>
                <ul>
                    <li><strong>No tienen prototype:</strong> No pueden crear objetos con métodos compartidos</li>
                    <li><strong>No tienen this propio:</strong> No pueden asignar propiedades a la instancia</li>
                    <li><strong>No tienen new.target:</strong> No pueden detectar si fueron llamadas con new</li>
                </ul>
                
                <h3>Ejemplo del Error:</h3>
                <pre><code class="language-javascript">const MiClase = () => {
    this.propiedad = "valor";
};

// Esto causará un error
try {
    let instancia = new MiClase();
} catch (error) {
    console.log("Error:", error.message);
    // "MiClase is not a constructor"
}</code></pre>
                
                <h3>Alternativas Modernas - Clases ES6:</h3>
                <pre><code class="language-javascript">// ✅ Usar clases ES6 en lugar de constructores
class Persona {
    constructor(nombre, edad) {
        this.nombre = nombre;
        this.edad = edad;
    }
    
    saludar() {
        console.log(`Hola, soy ${this.nombre}`);
    }
    
    // Método estático
    static crearAnonimo() {
        return new Persona("Anónimo", 0);
    }
}

let persona = new Persona("María", 30);
persona.saludar(); // "Hola, soy María"

let anonimo = Persona.crearAnonimo();
anonimo.saludar(); // "Hola, soy Anónimo"</code></pre>
                
                <h3>Factory Functions con Arrow Functions:</h3>
                <pre><code class="language-javascript">// ✅ Crear objetos sin usar new
const crearPersona = (nombre, edad) => ({
    nombre: nombre,
    edad: edad,
    saludar: () => {
        console.log(`Hola, soy ${nombre}`);
    }
});

let persona = crearPersona("Carlos", 25);
persona.saludar(); // "Hola, soy Carlos"

// ✅ Factory con métodos compartidos
const crearContador = (inicial = 0) => {
    let contador = inicial;
    
    return {
        incrementar: () => ++contador,
        decrementar: () => --contador,
        obtener: () => contador,
        resetear: () => contador = inicial
    };
};

let contador1 = crearContador(10);
let contador2 = crearContador(5);

console.log(contador1.incrementar()); // 11
console.log(contador2.incrementar()); // 6</code></pre>
                
                <h3>Comparación de Enfoques:</h3>
                <table style="width: 100%; border-collapse: collapse; margin: 1rem 0;">
                    <tr style="background: #f8f9fa;">
                        <th style="padding: 0.5rem; border: 1px solid #dee2e6;">Enfoque</th>
                        <th style="padding: 0.5rem; border: 1px solid #dee2e6;">Ventajas</th>
                        <th style="padding: 0.5rem; border: 1px solid #dee2e6;">Desventajas</th>
                    </tr>
                    <tr>
                        <td style="padding: 0.5rem; border: 1px solid #dee2e6;"><strong>Constructor tradicional</strong></td>
                        <td style="padding: 0.5rem; border: 1px solid #dee2e6;">Familiar, prototype</td>
                        <td style="padding: 0.5rem; border: 1px solid #dee2e6;">Confuso con this</td>
                    </tr>
                    <tr style="background: #f8f9fa;">
                        <td style="padding: 0.5rem; border: 1px solid #dee2e6;"><strong>Clases ES6</strong></td>
                        <td style="padding: 0.5rem; border: 1px solid #dee2e6;">Moderno, claro, herencia</td>
                        <td style="padding: 0.5rem; border: 1px solid #dee2e6;">Más verboso</td>
                    </tr>
                    <tr>
                        <td style="padding: 0.5rem; border: 1px solid #dee2e6;"><strong>Factory functions</strong></td>
                        <td style="padding: 0.5rem; border: 1px solid #dee2e6;">Flexible, sin new</td>
                        <td style="padding: 0.5rem; border: 1px solid #dee2e6;">Sin prototype</td>
                    </tr>
                </table>
                
                <h3>Ejemplo Completo - Sistema de Usuarios:</h3>
                <pre><code class="language-javascript">// ✅ Usando clases ES6 (recomendado)
class Usuario {
    constructor(nombre, email) {
        this.nombre = nombre;
        this.email = email;
        this.activo = true;
        this.fechaCreacion = new Date();
    }
    
    desactivar() {
        this.activo = false;
    }
    
    obtenerInfo() {
        return `${this.nombre} (${this.email}) - ${this.activo ? 'Activo' : 'Inactivo'}`;
    }
    
    static crearAdmin(nombre, email) {
        let admin = new Usuario(nombre, email);
        admin.esAdmin = true;
        return admin;
    }
}

// Uso
let usuario = new Usuario("Ana", "ana@email.com");
console.log(usuario.obtenerInfo()); // "Ana (ana@email.com) - Activo"

let admin = Usuario.crearAdmin("Carlos", "carlos@email.com");
console.log(admin.esAdmin); // true</code></pre>
                
                <h3>⚠️ Resumen:</h3>
                <ul>
                    <li><strong>Arrow functions NO pueden ser constructores</strong></li>
                    <li><strong>Usa clases ES6</strong> para crear objetos con <code>new</code></li>
                    <li><strong>Usa factory functions</strong> si quieres crear objetos sin <code>new</code></li>
                    <li><strong>Las clases son la forma moderna</strong> de crear constructores en JavaScript</li>
                </ul>
            </div>
        </div>
    </div>

    <!-- Modales Explicativos - Lección 3: Template Literals -->
    <div id="template-backticks-modal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('template-backticks-modal')">&times;</span>
            <h2><i class="fas fa-quote-left"></i> Backticks (`) - La Nueva Sintaxis</h2>
            <div class="modal-body">
                <h3>¿Qué son los Backticks? 🤔</h3>
                <p>Imagina que las <strong>comillas normales</strong> (' y ") son como cajas simples donde solo puedes meter texto plano. Los <strong>backticks</strong> (<code>`</code>) son como cajas mágicas que pueden hacer cosas increíbles con el texto.</p>
                
                <p>Los backticks son la forma <strong>moderna y inteligente</strong> de crear strings en JavaScript. Te permiten insertar variables, hacer cálculos y crear texto multilínea de forma súper fácil.</p>
                
                <h3>📍 ¿Dónde está el Backtick en mi Teclado?</h3>
                <p>🔍 <strong>Busca la tecla que tiene:</strong></p>
                <ul>
                    <li>El símbolo <code>~</code> (tilde) en la parte superior</li>
                    <li>Está arriba de la tecla TAB</li>
                    <li>A la izquierda del número 1</li>
                    <li>En teclados en español: <code>º</code> y <code>ª</code></li>
                </ul>
                <p><strong>💡 Tip:</strong> Si no lo encuentras, mantén presionada la tecla <code>Alt Gr</code> + la tecla que tiene <code>~</code></p>
                
                <h3>Diferencia con Comillas Tradicionales:</h3>
                <table style="width: 100%; border-collapse: collapse; margin: 1rem 0;">
                    <tr style="background: #f8f9fa;">
                        <th style="padding: 0.5rem; border: 1px solid #dee2e6;">Aspecto</th>
                        <th style="padding: 0.5rem; border: 1px solid #dee2e6;">Comillas ('  ")</th>
                        <th style="padding: 0.5rem; border: 1px solid #dee2e6;">Backticks (`)</th>
                    </tr>
                    <tr>
                        <td style="padding: 0.5rem; border: 1px solid #dee2e6;"><strong>Interpolación</strong></td>
                        <td style="padding: 0.5rem; border: 1px solid #dee2e6;">❌ No</td>
                        <td style="padding: 0.5rem; border: 1px solid #dee2e6;">✅ Sí con ${}</td>
                    </tr>
                    <tr style="background: #f8f9fa;">
                        <td style="padding: 0.5rem; border: 1px solid #dee2e6;"><strong>Multilínea</strong></td>
                        <td style="padding: 0.5rem; border: 1px solid #dee2e6;">❌ Requiere \n</td>
                        <td style="padding: 0.5rem; border: 1px solid #dee2e6;">✅ Directo</td>
                    </tr>
                    <tr>
                        <td style="padding: 0.5rem; border: 1px solid #dee2e6;"><strong>Expresiones</strong></td>
                        <td style="padding: 0.5rem; border: 1px solid #dee2e6;">❌ Concatenación</td>
                        <td style="padding: 0.5rem; border: 1px solid #dee2e6;">✅ Evaluación ${}</td>
                    </tr>
                </table>
                
                <h3>🎯 Ejemplos Reales: Antes vs Ahora</h3>
                
                <h4>📝 Ejemplo 1: Crear un saludo personalizado</h4>
                <p><strong>Problema:</strong> Quieres crear un mensaje que incluya el nombre y edad de una persona.</p>
                
                <div style="background: #fff3cd; padding: 1rem; border-radius: 8px; margin: 1rem 0;">
                    <h5>❌ Método Antiguo (Complicado):</h5>
                    <pre><code class="language-javascript">let nombre = "Ana";
let edad = 25;
// Tienes que usar + para unir todo... ¡Qué lío!
let mensaje1 = "Hola, mi nombre es " + nombre + " y tengo " + edad + " años";</code></pre>
                    <p><strong>Problemas:</strong> Muchos signos +, fácil olvidar espacios, difícil de leer</p>
                </div>
                
                <div style="background: #d4edda; padding: 1rem; border-radius: 8px; margin: 1rem 0;">
                    <h5>✅ Método Moderno (Fácil):</h5>
                    <pre><code class="language-javascript">let nombre = "Ana";
let edad = 25;
// ¡Súper fácil! Solo pones ${variable} donde quieras
let mensaje2 = `Hola, mi nombre es ${nombre} y tengo ${edad} años`;</code></pre>
                    <p><strong>Ventajas:</strong> Más claro, menos errores, más fácil de leer</p>
                </div>
                
                <h4>📄 Ejemplo 2: Texto Multilínea</h4>
                <p><strong>Problema:</strong> Quieres crear un párrafo de varias líneas.</p>
                
                <div style="background: #fff3cd; padding: 1rem; border-radius: 8px; margin: 1rem 0;">
                    <h5>❌ Método Antiguo (Feo):</h5>
                    <pre><code class="language-javascript">// Tienes que usar \n para saltos de línea... ¡Qué feo!
let texto1 = "Primera línea\n" +
             "Segunda línea\n" +
             "Tercera línea";</code></pre>
                </div>
                
                <div style="background: #d4edda; padding: 1rem; border-radius: 8px; margin: 1rem 0;">
                    <h5>✅ Método Moderno (Elegante):</h5>
                    <pre><code class="language-javascript">// ¡Simplemente escribes como en un documento!
let texto2 = `Primera línea
Segunda línea
Tercera línea`;</code></pre>
                </div>
                
                <h3>Ejemplos Comparativos:</h3>
                <pre><code class="language-javascript">// ❌ Con comillas tradicionales
let nombre = "Ana";
let edad = 25;
let mensaje1 = "Hola, mi nombre es " + nombre + " y tengo " + edad + " años";

// ✅ Con backticks (template literals)
let mensaje2 = `Hola, mi nombre es ${nombre} y tengo ${edad} años`;

console.log(mensaje1); // "Hola, mi nombre es Ana y tengo 25 años"
console.log(mensaje2); // "Hola, mi nombre es Ana y tengo 25 años"

// Multilínea con comillas (feo)
let texto1 = "Primera línea\n" +
             "Segunda línea\n" +
             "Tercera línea";

// Multilínea con backticks (elegante)
let texto2 = `Primera línea
Segunda línea
Tercera línea`;
</code></pre>
                
                <h3>Ventajas de los Backticks:</h3>
                <ul>
                    <li><strong>Más legible:</strong> El código es más fácil de leer y entender</li>
                    <li><strong>Menos errores:</strong> No necesitas concatenar con +</li>
                    <li><strong>Más potente:</strong> Puedes ejecutar expresiones dentro del string</li>
                    <li><strong>Flexible:</strong> Strings multilínea sin escape characters</li>
                </ul>
                
                <h3>⚠️ Importante:</h3>
                <p>Los backticks NO son lo mismo que las comillas simples. No los confundas: <code>`</code> vs <code>'</code></p>
            </div>
        </div>
    </div>

    <div id="template-interpolation-modal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('template-interpolation-modal')">&times;</span>
            <h2><i class="fas fa-dollar-sign"></i> Interpolación de Variables ${variable}</h2>
            <div class="modal-body">
                <h3>¿Qué es la Interpolación?</h3>
                <p><strong>Interpolar</strong> significa <strong>insertar el valor de una variable directamente dentro de un string</strong>. Con template literals, usas la sintaxis <code>${variable}</code> para lograrlo.</p>
                
                <h3>Sintaxis:</h3>
                <pre><code class="language-javascript">`Texto ${nombreVariable} más texto`</code></pre>
                
                <h3>Comparación: Antes vs Ahora</h3>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
                    <div>
                        <h4>❌ Método Antiguo (Concatenación):</h4>
                        <pre><code class="language-javascript">let nombre = "Carlos";
let edad = 30;
let ciudad = "Madrid";

let mensaje = "Hola, soy " + nombre + 
              ", tengo " + edad + 
              " años y vivo en " + ciudad;

console.log(mensaje);</code></pre>
                        <p style="color: #e74c3c;"><strong>Problemas:</strong></p>
                        <ul>
                            <li>Muchos signos + dificultan la lectura</li>
                            <li>Fácil olvidar espacios</li>
                            <li>Difícil de mantener</li>
                        </ul>
                    </div>
                    <div>
                        <h4>✅ Método Moderno (Interpolación):</h4>
                        <pre><code class="language-javascript">let nombre = "Carlos";
let edad = 30;
let ciudad = "Madrid";

let mensaje = `Hola, soy ${nombre}, tengo ${edad} años y vivo en ${ciudad}`;

console.log(mensaje);</code></pre>
                        <p style="color: #27ae60;"><strong>Ventajas:</strong></p>
                        <ul>
                            <li>Más legible y claro</li>
                            <li>Menos propenso a errores</li>
                            <li>Fácil de mantener</li>
                        </ul>
                    </div>
                </div>
                
                <h3>Ejemplos Prácticos:</h3>
                <pre><code class="language-javascript">// Saludo personalizado
let usuario = "Ana";
console.log(`¡Bienvenida, ${usuario}!`);

// Información de producto
let producto = "Laptop";
let precio = 999;
console.log(`El producto ${producto} cuesta $${precio}`);

// Datos de usuario
let user = {
    nombre: "María",
    edad: 28,
    profesion: "Desarrolladora"
};
console.log(`${user.nombre} es ${user.profesion} y tiene ${user.edad} años`);

// Arrays
let frutas = ["manzana", "banana", "naranja"];
console.log(`Mi fruta favorita es ${frutas[0]}`);

// Fechas
let fecha = new Date();
console.log(`Hoy es ${fecha.toLocaleDateString()}`);
</code></pre>
                
                <h3>Múltiples Variables:</h3>
                <pre><code class="language-javascript">let nombre = "Juan";
let apellido = "Pérez";
let empresa = "TechCorp";
let cargo = "Senior Developer";

let firma = `
════════════════════════════
${nombre} ${apellido}
${cargo} at ${empresa}
════════════════════════════
`;

console.log(firma);</code></pre>
                
                <h3>💡 Consejo:</h3>
                <p>Siempre que necesites incluir variables en un string, usa template literals. Es la forma moderna y recomendada en JavaScript.</p>
            </div>
        </div>
    </div>

    <div id="template-expressions-modal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('template-expressions-modal')">&times;</span>
            <h2><i class="fas fa-calculator"></i> Evaluación de Expresiones ${expresion}</h2>
            <div class="modal-body">
                <h3>¿Qué son las Expresiones?</h3>
                <p>Dentro de <code>${}</code> no solo puedes poner variables, sino <strong>cualquier expresión de JavaScript válida</strong>. La expresión se evalúa y su resultado se convierte en string.</p>
                
                <h3>Tipos de Expresiones que Puedes Usar:</h3>
                
                <h4>1. Operaciones Matemáticas:</h4>
                <pre><code class="language-javascript">let a = 10;
let b = 5;

console.log(`La suma es: ${a + b}`);           // "La suma es: 15"
console.log(`La resta es: ${a - b}`);          // "La resta es: 5"
console.log(`El producto es: ${a * b}`);       // "El producto es: 50"
console.log(`La división es: ${a / b}`);       // "La división es: 2"
console.log(`El módulo es: ${a % b}`);         // "El módulo es: 0"
console.log(`Potencia: ${a ** 2}`);            // "Potencia: 100"</code></pre>
                
                <h4>2. Operadores Ternarios:</h4>
                <pre><code class="language-javascript">let edad = 18;
let mensaje = `Eres ${edad >= 18 ? 'mayor' : 'menor'} de edad`;
console.log(mensaje); // "Eres mayor de edad"

let precio = 100;
let descuento = `Precio: $${precio > 50 ? precio * 0.9 : precio}`;
console.log(descuento); // "Precio: $90"

let hora = 14;
let saludo = `${hora < 12 ? 'Buenos días' : hora < 20 ? 'Buenas tardes' : 'Buenas noches'}`;
console.log(saludo); // "Buenas tardes"</code></pre>
                
                <h4>3. Llamadas a Funciones:</h4>
                <pre><code class="language-javascript">function obtenerNombre() {
    return "Pedro";
}

function calcularEdad(anioNacimiento) {
    return new Date().getFullYear() - anioNacimiento;
}

console.log(`Hola, ${obtenerNombre()}!`);
// "Hola, Pedro!"

console.log(`Tienes ${calcularEdad(1995)} años`);
// "Tienes 29 años" (dependiendo del año actual)</code></pre>
                
                <h4>4. Métodos de Arrays:</h4>
                <pre><code class="language-javascript">let numeros = [1, 2, 3, 4, 5];

console.log(`Longitud: ${numeros.length}`);
// "Longitud: 5"

console.log(`Primer elemento: ${numeros[0]}`);
// "Primer elemento: 1"

console.log(`Array al revés: ${numeros.reverse()}`);
// "Array al revés: 5,4,3,2,1"

console.log(`Suma total: ${numeros.reduce((a, b) => a + b, 0)}`);
// "Suma total: 15"</code></pre>
                
                <h4>5. Métodos de String:</h4>
                <pre><code class="language-javascript">let nombre = "javascript";

console.log(`Mayúsculas: ${nombre.toUpperCase()}`);
// "Mayúsculas: JAVASCRIPT"

console.log(`Primera letra: ${nombre.charAt(0).toUpperCase()}`);
// "Primera letra: J"

console.log(`Longitud: ${nombre.length} caracteres`);
// "Longitud: 10 caracteres"</code></pre>
                
                <h4>6. Acceso a Propiedades de Objetos:</h4>
                <pre><code class="language-javascript">let usuario = {
    nombre: "Ana",
    edad: 25,
    direccion: {
        ciudad: "Barcelona",
        pais: "España"
    },
    obtenerEmail() {
        return "ana@email.com";
    }
};

console.log(`${usuario.nombre} vive en ${usuario.direccion.ciudad}`);
// "Ana vive en Barcelona"

console.log(`Email: ${usuario.obtenerEmail()}`);
// "Email: ana@email.com"</code></pre>
                
                <h4>7. Expresiones Complejas:</h4>
                <pre><code class="language-javascript">let productos = [
    { nombre: "Laptop", precio: 999 },
    { nombre: "Mouse", precio: 25 },
    { nombre: "Teclado", precio: 75 }
];

console.log(`
Total de productos: ${productos.length}
Precio promedio: $${(productos.reduce((sum, p) => sum + p.precio, 0) / productos.length).toFixed(2)}
Producto más caro: ${productos.sort((a, b) => b.precio - a.precio)[0].nombre}
`);</code></pre>
                
                <h3>⚠️ Lo que NO puedes hacer dentro de ${}:</h3>
                <ul>
                    <li>❌ Declaraciones de variables: <code>${let x = 5}</code></li>
                    <li>❌ Statements if/else completos (usa ternario)</li>
                    <li>❌ Bucles for/while</li>
                    <li>✅ Solo EXPRESIONES que devuelvan un valor</li>
                </ul>
                
                <h3>💡 Regla de Oro:</h3>
                <p>Si puedes asignarlo a una variable con <code>let x = ...</code>, entonces puedes usarlo dentro de <code>${}</code></p>
            </div>
        </div>
    </div>

    <div id="template-legibility-modal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('template-legibility-modal')">&times;</span>
            <h2><i class="fas fa-eye"></i> Legibilidad - Código Más Limpio y Claro</h2>
            <div class="modal-body">
                <h3>¿Por qué Template Literals son Más Legibles?</h3>
                <p>La legibilidad del código es crucial para el mantenimiento y la colaboración. Los template literals hacen que el código sea <strong>más fácil de leer, entender y modificar</strong>.</p>
                
                <h3>Ejemplo 1: Mensajes de Usuario</h3>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
                    <div>
                        <h4>❌ Difícil de Leer:</h4>
                        <pre><code class="language-javascript">let user = "Ana";
let items = 3;
let total = 150.50;

let msg = "Hola " + user + ", " +
          "tienes " + items + 
          " artículos en tu carrito " +
          "por un total de $" + 
          total.toFixed(2) + ". " +
          "¿Deseas proceder?";</code></pre>
                        <p style="color: #e74c3c;">🔴 Problemas:</p>
                        <ul>
                            <li>Muchos signos +</li>
                            <li>Difícil seguir el texto</li>
                            <li>Fácil olvidar espacios</li>
                            <li>Propenso a errores</li>
                        </ul>
                    </div>
                    <div>
                        <h4>✅ Fácil de Leer:</h4>
                        <pre><code class="language-javascript">let user = "Ana";
let items = 3;
let total = 150.50;

let msg = `Hola ${user}, tienes ${items} artículos en tu carrito por un total de $${total.toFixed(2)}. ¿Deseas proceder?`;
</code></pre>
                        <p style="color: #27ae60;">🟢 Ventajas:</p>
                        <ul>
                            <li>Texto fluido y natural</li>
                            <li>Fácil de seguir</li>
                            <li>Menos caracteres especiales</li>
                            <li>Menos errores</li>
                        </ul>
                    </div>
                </div>
                
                <h3>Ejemplo 2: Generación de HTML</h3>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
                    <div>
                        <h4>❌ Concatenación Complicada:</h4>
                        <pre><code class="language-javascript">let name = "Juan";
let age = 30;
let job = "Developer";

let html = "<div class=\"card\">" +
           "<h2>" + name + "</h2>" +
           "<p>Edad: " + age + "</p>" +
           "<p>Trabajo: " + job + "</p>" +
           "</div>";
</code></pre>
                    </div>
                    <div>
                        <h4>✅ Template Literal Claro:</h4>
                        <pre><code class="language-javascript">let name = "Juan";
let age = 30;
let job = "Developer";

let html = `
<div class="card">
    <h2>${name}</h2>
    <p>Edad: ${age}</p>
    <p>Trabajo: ${job}</p>
</div>
`;
</code></pre>
                    </div>
                </div>
                
                <h3>Ejemplo 3: Consultas SQL</h3>
                <pre><code class="language-javascript">// ❌ Difícil de leer
let query = "SELECT * FROM users WHERE id = " + userId + " AND status = '" + status + "' AND created_at > '" + date + "'";

// ✅ Mucho más claro
let query = `SELECT * FROM users WHERE id = ${userId} AND status = '${status}' AND created_at > '${date}'`;
</code></pre>
                
                <h3>Ejemplo 4: URLs con Parámetros</h3>
                <pre><code class="language-javascript">let endpoint = "api.example.com";
let userId = 123;
let filter = "active";
let page = 2;

// ❌ Difícil de seguir
let url = "https://" + endpoint + "/users/" + userId + "?filter=" + filter + "&page=" + page;

// ✅ Cristalino
let url = `https://${endpoint}/users/${userId}?filter=${filter}&page=${page}`;

console.log(url);
// "https://api.example.com/users/123?filter=active&page=2"
</code></pre>
                
                <h3>Ejemplo 5: Mensajes de Error</h3>
                <pre><code class="language-javascript">function validarEdad(edad, minima) {
    if (edad < minima) {
        // ❌ Complicado
        throw new Error("La edad " + edad + " es menor que la mínima requerida de " + minima + " años");
        
        // ✅ Claro
        throw new Error(`La edad ${edad} es menor que la mínima requerida de ${minima} años`);
    }
}
</code></pre>
                
                <h3>Beneficios Cuantificables:</h3>
                <table style="width: 100%; border-collapse: collapse; margin: 1rem 0;">
                    <tr style="background: #f8f9fa;">
                        <th style="padding: 0.5rem; border: 1px solid #dee2e6;">Métrica</th>
                        <th style="padding: 0.5rem; border: 1px solid #dee2e6;">Concatenación</th>
                        <th style="padding: 0.5rem; border: 1px solid #dee2e6;">Template Literals</th>
                    </tr>
                    <tr>
                        <td style="padding: 0.5rem; border: 1px solid #dee2e6;"><strong>Caracteres especiales</strong></td>
                        <td style="padding: 0.5rem; border: 1px solid #dee2e6;">Muchos + y "</td>
                        <td style="padding: 0.5rem; border: 1px solid #dee2e6;">Solo ${}</td>
                    </tr>
                    <tr style="background: #f8f9fa;">
                        <td style="padding: 0.5rem; border: 1px solid #dee2e6;"><strong>Errores de espacios</strong></td>
                        <td style="padding: 0.5rem; border: 1px solid #dee2e6;">Frecuentes</td>
                        <td style="padding: 0.5rem; border: 1px solid #dee2e6;">Raros</td>
                    </tr>
                    <tr>
                        <td style="padding: 0.5rem; border: 1px solid #dee2e6;"><strong>Tiempo de lectura</strong></td>
                        <td style="padding: 0.5rem; border: 1px solid #dee2e6;">Lento</td>
                        <td style="padding: 0.5rem; border: 1px solid #dee2e6;">Rápido</td>
                    </tr>
                    <tr style="background: #f8f9fa;">
                        <td style="padding: 0.5rem; border: 1px solid #dee2e6;"><strong>Facilidad de modificación</strong></td>
                        <td style="padding: 0.5rem; border: 1px solid #dee2e6;">Difícil</td>
                        <td style="padding: 0.5rem; border: 1px solid #dee2e6;">Fácil</td>
                    </tr>
                </table>
                
                <h3>💡 Consejo Profesional:</h3>
                <p>Los desarrolladores experimentados siempre prefieren template literals por su legibilidad. Es una buena práctica que facilita el trabajo en equipo y el mantenimiento del código a largo plazo.</p>
            </div>
        </div>
    </div>

    <div id="template-multiline-modal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('template-multiline-modal')">&times;</span>
            <h2><i class="fas fa-align-left"></i> Strings Multilínea - Sin Concatenación</h2>
            <div class="modal-body">
                <h3>El Problema con las Comillas Tradicionales</h3>
                <p>Antes de ES6, crear strings de múltiples líneas era complicado y poco elegante. Tenías que usar caracteres de escape (<code>\n</code>) o concatenación con <code>+</code>.</p>
                
                <h3>Comparación: Antes vs Ahora</h3>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
                    <div>
                        <h4>❌ Método Antiguo:</h4>
                        <pre><code class="language-javascript">// Con \n (escape character)
let poema = "Roses are red,\nViolets are blue,\nSugar is sweet,\nAnd so are you.";

// Con concatenación
let carta = "Estimado cliente,\n" +
            "\n" +
            "Nos complace informarle\n" +
            "que su pedido ha sido\n" +
            "procesado exitosamente.\n" +
            "\n" +
            "Saludos cordiales,\n" +
            "El equipo";

console.log(carta);</code></pre>
                        <p style="color: #e74c3c;">🔴 Problemas:</p>
                        <ul>
                            <li>Difícil de visualizar el resultado</li>
                            <li>Muchos \n y +</li>
                            <li>Propenso a errores</li>
                            <li>Difícil de mantener</li>
                        </ul>
                    </div>
                    <div>
                        <h4>✅ Método Moderno:</h4>
                        <pre><code class="language-javascript">// Template literals multilínea
let poema = `Roses are red,
Violets are blue,
Sugar is sweet,
And so are you.`;

// Carta con formato
let carta = `Estimado cliente,

Nos complace informarle
que su pedido ha sido
procesado exitosamente.

Saludos cordiales,
El equipo`;

console.log(carta);</code></pre>
                        <p style="color: #27ae60;">🟢 Ventajas:</p>
                        <ul>
                            <li>Fácil de visualizar</li>
                            <li>Sin caracteres especiales</li>
                            <li>Menos errores</li>
                            <li>Fácil de mantener</li>
                        </ul>
                    </div>
                </div>
                
                <h3>Ejemplo 1: Generación de HTML</h3>
                <pre><code class="language-javascript">let nombre = "Ana";
let edad = 28;
let profesion = "Desarrolladora";

let tarjetaPerfil = `
<div class="perfil-card">
    <div class="header">
        <h2>${nombre}</h2>
        <span class="badge">${profesion}</span>
    </div>
    <div class="body">
        <p>Edad: ${edad} años</p>
        <p>Experiencia: ${edad - 22} años</p>
        <button onclick="contactar('${nombre}')">
            Contactar
        </button>
    </div>
</div>
`;

document.getElementById('container').innerHTML = tarjetaPerfil;</code></pre>
                
                <h3>Ejemplo 2: Emails/Notificaciones</h3>
                <pre><code class="language-javascript">function generarEmailBienvenida(usuario) {
    return `
        Hola ${usuario.nombre},
        
        ¡Bienvenido/a a nuestra plataforma!
        
        Tu cuenta ha sido creada exitosamente con los siguientes datos:
        
        - Usuario: ${usuario.email}
        - Plan: ${usuario.plan}
        - Fecha de registro: ${new Date().toLocaleDateString()}
        
        Para comenzar, visita:
        https://miapp.com/dashboard
        
        Si tienes alguna pregunta, no dudes en contactarnos.
        
        Saludos,
        El equipo de MiApp
    `;
}

let usuario = {
    nombre: "Carlos",
    email: "carlos@email.com",
    plan: "Premium"
};

console.log(generarEmailBienvenida(usuario));</code></pre>
                
                <h3>Ejemplo 3: Consultas SQL</h3>
                <pre><code class="language-javascript">let userId = 123;
let startDate = "2024-01-01";
let endDate = "2024-12-31";

let query = `
    SELECT 
        u.id,
        u.nombre,
        u.email,
        COUNT(p.id) as total_pedidos,
        SUM(p.total) as total_gastado
    FROM usuarios u
    LEFT JOIN pedidos p ON u.id = p.usuario_id
    WHERE u.id = ${userId}
        AND p.fecha BETWEEN '${startDate}' AND '${endDate}'
    GROUP BY u.id
    ORDER BY total_gastado DESC
`;

// Ejecutar query...
console.log(query);</code></pre>
                
                <h3>Ejemplo 4: Documentación/Help Text</h3>
                <pre><code class="language-javascript">function mostrarAyuda(comando) {
    const ayuda = `
╔══════════════════════════════════════╗
║     AYUDA: ${comando.toUpperCase()}                    ║
╠══════════════════════════════════════╣
║                                      ║
║  Uso:                                ║
║    ${comando} [opciones] <archivo>      ║
║                                      ║
║  Opciones:                           ║
║    -h, --help     Muestra esta ayuda ║
║    -v, --version  Muestra la versión ║
║    -o, --output   Archivo de salida  ║
║                                      ║
║  Ejemplos:                           ║
║    ${comando} -o resultado.txt input.txt ║
║    ${comando} --help                    ║
║                                      ║
╚══════════════════════════════════════╝
    `;
    
    console.log(ayuda);
}

mostrarAyuda("procesar");</code></pre>
                
                <h3>Ejemplo 5: Reportes/Logs</h3>
                <pre><code class="language-javascript">function generarReporte(datos) {
    return `
┌─────────────────────────────────────┐
│        REPORTE DE VENTAS            │
├─────────────────────────────────────┤
│ Fecha: ${new Date().toLocaleDateString()}              │
│ Total de ventas: ${datos.totalVentas}          │
│ Promedio por venta: $${datos.promedio}     │
│ Producto más vendido: ${datos.topProducto}  │
│                                     │
│ Desglose por categoría:             │
│ - Electrónicos: $${datos.electronica}       │
│ - Ropa: $${datos.ropa}                      │
│ - Hogar: $${datos.hogar}                    │
│                                     │
│ Estado: ${datos.estado}                     │
└─────────────────────────────────────┘
    `;
}

let datos = {
    totalVentas: 150,
    promedio: 45.50,
    topProducto: "Laptop Pro",
    electronica: 75000,
    ropa: 25000,
    hogar: 50000,
    estado: "✅ Aprobado"
};

console.log(generarReporte(datos));</code></pre>
                
                <h3>⚠️ Cuidado con la Indentación:</h3>
                <pre><code class="language-javascript">// ❌ La indentación se incluye en el string
function mal() {
    let html = `
        <div>
            <p>Texto</p>
        </div>
    `;
    // El resultado incluye todos los espacios!
}

// ✅ Mejor control de indentación
function bien() {
    let html = `
<div>
    <p>Texto</p>
</div>
`.trim(); // trim() elimina espacios al inicio/final
}</code></pre>
                
                <h3>💡 Consejo:</h3>
                <p>Los template literals multilínea son perfectos para HTML, SQL, emails, reportes y cualquier texto largo. Hacen que tu código sea mucho más legible y mantenible.</p>
            </div>
        </div>
    </div>

    <div id="template-flexibility-modal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('template-flexibility-modal')">&times;</span>
            <h2><i class="fas fa-expand-arrows-alt"></i> Flexibilidad - Expresiones Complejas</h2>
            <div class="modal-body">
                <h3>El Poder de ${}</h3>
                <p>Los template literals no solo permiten variables simples, sino <strong>cualquier expresión JavaScript válida</strong>. Esto los hace increíblemente flexibles y potentes.</p>
                
                <h3>1. Expresiones Condicionales Complejas</h3>
                <pre><code class="language-javascript">let usuario = {
    nombre: "Ana",
    edad: 17,
    premium: true,
    creditos: 50
};

// Ternarios anidados
let mensaje = `
Hola ${usuario.nombre},
Eres ${usuario.edad >= 18 ? 'mayor' : 'menor'} de edad.
Tu cuenta es ${usuario.premium ? 'Premium ⭐' : 'Básica'}.
${usuario.premium ? 
    `Tienes ${usuario.creditos} créditos disponibles.` : 
    'Mejora a Premium para obtener créditos.'
}
`;

console.log(mensaje);</code></pre>
                
                <h3>2. Transformación de Datos</h3>
                <pre><code class="language-javascript">let productos = [
    { nombre: "Laptop", precio: 999, stock: 5 },
    { nombre: "Mouse", precio: 25, stock: 0 },
    { nombre: "Teclado", precio: 75, stock: 12 }
];

let reporte = `
REPORTE DE INVENTARIO
═════════════════════════════════

Total de productos: ${productos.length}
Productos en stock: ${productos.filter(p => p.stock > 0).length}
Productos agotados: ${productos.filter(p => p.stock === 0).length}

Valor total del inventario: $${productos.reduce((sum, p) => sum + (p.precio * p.stock), 0)}

Productos por precio (descendente):
${productos
    .sort((a, b) => b.precio - a.precio)
    .map((p, i) => `${i + 1}. ${p.nombre}: $${p.precio} (Stock: ${p.stock})`)
    .join('\n')}

⚠️ Productos que necesitan reabastecimiento:
${productos
    .filter(p => p.stock < 5)
    .map(p => `- ${p.nombre} (${p.stock} unidades)`)
    .join('\n') || 'Ninguno'}
`;

console.log(reporte);</code></pre>
                
                <h3>3. Formateo Dinámico</h3>
                <pre><code class="language-javascript">function formatearMoneda(valor, moneda = 'USD') {
    return new Intl.NumberFormat('es-ES', {
        style: 'currency',
        currency: moneda
    }).format(valor);
}

function formatearFecha(fecha) {
    return new Date(fecha).toLocaleDateString('es-ES', {
        weekday: 'long',
        year: 'numeric',
        month: 'long',
        day: 'numeric'
    });
}

let pedido = {
    id: 12345,
    cliente: "Carlos Rodríguez",
    total: 1250.50,
    fecha: "2024-01-15",
    items: 8
};

let factura = `
╔═══════════════════════════════════════╗
║           FACTURA #${pedido.id}            ║
╠═══════════════════════════════════════╣
║                                       ║
║  Cliente: ${pedido.cliente.padEnd(26)} ║
║  Fecha: ${formatearFecha(pedido.fecha).padEnd(28)} ║
║                                       ║
║  Cantidad de artículos: ${String(pedido.items).padStart(12)} ║
║  Subtotal: ${formatearMoneda(pedido.total * 0.81).padStart(21)} ║
║  IVA (19%): ${formatearMoneda(pedido.total * 0.19).padStart(20)} ║
║  ─────────────────────────────────── ║
║  TOTAL: ${formatearMoneda(pedido.total).padStart(24)} ║
║                                       ║
╚═══════════════════════════════════════╝
`;

console.log(factura);</code></pre>
                
                <h3>4. Generación de Código</h3>
                <pre><code class="language-javascript">function generarClase(nombre, propiedades) {
    return `
class ${nombre} {
    constructor(${propiedades.map(p => p.nombre).join(', ')}) {
${propiedades.map(p => `        this.${p.nombre} = ${p.nombre};`).join('\n')}
    }
    
${propiedades.map(p => `
    get${p.nombre.charAt(0).toUpperCase() + p.nombre.slice(1)}() {
        return this.${p.nombre};
    }
    
    set${p.nombre.charAt(0).toUpperCase() + p.nombre.slice(1)}(valor) {
        this.${p.nombre} = valor;
    }
`).join('\n')}
    
    toString() {
        return \`${nombre} { ${propiedades.map(p => `${p.nombre}: \${this.${p.nombre}}`).join(', ')} }\`;
    }
}
    `;
}

let codigo = generarClase('Usuario', [
    { nombre: 'nombre', tipo: 'string' },
    { nombre: 'edad', tipo: 'number' },
    { nombre: 'email', tipo: 'string' }
]);

console.log(codigo);</code></pre>
                
                <h3>5. Templates Anidados</h3>
                <pre><code class="language-javascript">let usuarios = [
    { id: 1, nombre: "Ana", rol: "Admin", activo: true },
    { id: 2, nombre: "Carlos", rol: "Usuario", activo: true },
    { id: 3, nombre: "María", rol: "Usuario", activo: false }
];

let tablaHTML = `
<table class="usuarios-table">
    <thead>
        <tr>
            <th>ID</th>
            <th>Nombre</th>
            <th>Rol</th>
            <th>Estado</th>
        </tr>
    </thead>
    <tbody>
        ${usuarios.map(u => `
            <tr class="${u.activo ? 'activo' : 'inactivo'}">
                <td>${u.id}</td>
                <td>${u.nombre}</td>
                <td>
                    <span class="badge badge-${u.rol === 'Admin' ? 'danger' : 'primary'}">
                        ${u.rol}
                    </span>
                </td>
                <td>
                    ${u.activo ? 
                        '<span class="status-active">✅ Activo</span>' : 
                        '<span class="status-inactive">❌ Inactivo</span>'
                    }
                </td>
            </tr>
        `).join('')}
    </tbody>
</table>
`;

document.body.innerHTML = tablaHTML;</code></pre>
                
                <h3>6. Internacionalización (i18n)</h3>
                <pre><code class="language-javascript">const traducciones = {
    es: {
        bienvenida: "Bienvenido",
        productos: "productos",
        carrito: "carrito"
    },
    en: {
        bienvenida: "Welcome",
        productos: "products",
        carrito: "cart"
    },
    fr: {
        bienvenida: "Bienvenue",
        productos: "produits",
        carrito: "panier"
    }
};

function mensaje(idioma, usuario, numProductos) {
    const t = traducciones[idioma];
    return `${t.bienvenida} ${usuario}, tienes ${numProductos} ${t.productos} en tu ${t.carrito}.`;
}

console.log(mensaje('es', 'Ana', 5));
// "Bienvenido Ana, tienes 5 productos en tu carrito."

console.log(mensaje('en', 'Ana', 5));
// "Welcome Ana, you have 5 products in your cart."

console.log(mensaje('fr', 'Ana', 5));
// "Bienvenue Ana, vous avez 5 produits dans votre panier."</code></pre>
                
                <h3>7. Debugging Avanzado</h3>
                <pre><code class="language-javascript">function debugObject(obj, nombre = 'Object') {
    return `
╔${'═'.repeat(50)}╗
║ DEBUG: ${nombre.padEnd(42)}║
╠${'═'.repeat(50)}╣
${Object.entries(obj).map(([key, value]) => {
    const tipo = typeof value;
    const valorStr = tipo === 'object' ? JSON.stringify(value) : String(value);
    return `║ ${key.padEnd(20)} │ ${tipo.padEnd(10)} │ ${valorStr.slice(0, 15).padEnd(15)} ║`;
}).join('\n')}
╚${'═'.repeat(50)}╝
    `;
}

let datos = {
    nombre: "Ana",
    edad: 28,
    activo: true,
    config: { tema: "oscuro" }
};

console.log(debugObject(datos, 'Usuario'));</code></pre>
                
                <h3>Casos de Uso Profesionales:</h3>
                <ul>
                    <li><strong>APIs:</strong> Construcción dinámica de URLs con parámetros</li>
                    <li><strong>Logs:</strong> Mensajes formateados con contexto completo</li>
                    <li><strong>Testing:</strong> Generación de datos de prueba</li>
                    <li><strong>Reportes:</strong> Informes complejos con cálculos</li>
                    <li><strong>Documentación:</strong> Generación automática de docs</li>
                    <li><strong>CLI Tools:</strong> Interfaces de línea de comandos</li>
                </ul>
                
                <h3>💡 Límites y Buenas Prácticas:</h3>
                <ul>
                    <li>✅ Usa template literals para strings con lógica simple/media</li>
                    <li>❌ Si la lógica es muy compleja, extrae a funciones separadas</li>
                    <li>✅ Son perfectos para templates de UI (React, Vue, etc.)</li>
                    <li>✅ Excelentes para construcción de strings dinámicos</li>
                    <li>⚠️ Ten cuidado con la seguridad al insertar datos de usuarios</li>
                </ul>
            </div>
        </div>
    </div>

    <!-- Floating Action Button -->
    <div class="fab-container">
        <button class="fab-button" id="fabButton">
            <i class="fas fa-bars"></i>
        </button>
        <div class="fab-menu" id="fabMenu">
            <a href="#" class="fab-item" onclick="scrollToTop(); return false;">
                <i class="fas fa-arrow-up"></i>
                <span>Ir Arriba</span>
            </a>
            <a href="#let-const" class="fab-item">
                <i class="fas fa-tag"></i>
                <span>Lección 1: Let, Const y Var</span>
            </a>
            <a href="#arrow-functions" class="fab-item">
                <i class="fas fa-arrow-right"></i>
                <span>Lección 2: Arrow Functions</span>
            </a>
            <a href="#template-literals" class="fab-item">
                <i class="fas fa-quote-left"></i>
                <span>Lección 3: Template Literals</span>
            </a>
        </div>
    </div>

    <script>
        // FAB functionality
        const fabButton = document.getElementById('fabButton');
        const fabMenu = document.getElementById('fabMenu');
        
        fabButton.addEventListener('click', () => {
            fabMenu.classList.toggle('active');
            fabButton.classList.toggle('active');
        });

        // Close FAB menu when clicking outside
        document.addEventListener('click', (e) => {
            if (!e.target.closest('.fab-container')) {
                fabMenu.classList.remove('active');
                fabButton.classList.remove('active');
            }
        });

        // Scroll to top function
        function scrollToTop() {
            window.scrollTo({
                top: 0,
                behavior: 'smooth'
            });
        }

        // Close FAB menu when clicking on a lesson link
        document.querySelectorAll('.fab-item[href^="#"]').forEach(link => {
            link.addEventListener('click', () => {
                fabMenu.classList.remove('active');
                fabButton.classList.remove('active');
            });
        });

        // Close modal when clicking outside
        window.addEventListener('click', function(event) {
            if (event.target.classList.contains('modal')) {
                event.target.style.display = 'none';
                // Stop any playing speech
                if (currentSpeech) {
                    speechSynthesis.cancel();
                    currentSpeech = null;
                }
            }
        });

        // Text-to-Speech functionality
        let currentSpeech = null;
        
        function readModalContent(modalId) {
            const modal = document.getElementById(modalId);
            if (!modal) return;
            
            const audioBtn = modal.querySelector('.audio-btn');
            const modalBody = modal.querySelector('.modal-body');
            
            if (!modalBody) return;
            
            // Stop current speech if playing
            if (currentSpeech) {
                speechSynthesis.cancel();
                currentSpeech = null;
                audioBtn.classList.remove('playing');
                audioBtn.innerHTML = '<i class="fas fa-volume-up"></i>';
                return;
            }
            
            // Get text content from modal body
            let textToRead = '';
            
            // Extract text from headings and paragraphs, skip code blocks
            const elements = modalBody.querySelectorAll('h3, h4, p, li, ul, ol');
            elements.forEach(element => {
                // Skip code blocks
                if (element.closest('pre') || element.closest('code')) return;
                
                const text = element.textContent.trim();
                if (text) {
                    textToRead += text + '. ';
                }
            });
            
            if (!textToRead) {
                textToRead = 'No hay contenido de texto para leer.';
            }
            
            // Create speech synthesis
            const utterance = new SpeechSynthesisUtterance(textToRead);
            utterance.lang = 'es-ES';
            utterance.rate = 1.1;
            utterance.pitch = 1;
            utterance.volume = 0.9;
            
            // Update button state
            audioBtn.classList.add('playing');
            audioBtn.innerHTML = '<i class="fas fa-stop"></i>';
            
            // Handle speech events
            utterance.onstart = () => {
                currentSpeech = utterance;
            };
            
            utterance.onend = () => {
                currentSpeech = null;
                audioBtn.classList.remove('playing');
                audioBtn.innerHTML = '<i class="fas fa-volume-up"></i>';
            };
            
            utterance.onerror = () => {
                currentSpeech = null;
                audioBtn.classList.remove('playing');
                audioBtn.innerHTML = '<i class="fas fa-volume-up"></i>';
            };
            
            // Start speaking
            speechSynthesis.speak(utterance);
        }
    </script>
</body>
</html>
